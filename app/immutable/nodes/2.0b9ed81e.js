import{B as se,s as ee,f as C,l as ie,a as L,g as T,h as D,m as ae,d as w,c as B,u as q,j as k,C as de,i as S,y,D as he,E as j,n as ce,z as W,F as pe,p as Y,G as Ke,H as me,b as Fe,I as Ze,A as ge,J as He,e as x,K as Qe,r as Xe,v as Ye,w as xe,x as et,t as tt,L as ke}from"../chunks/scheduler.f99d7ea6.js";import{t as I,a as O,S as te,i as ne,b as K,d as F,m as Z,g as re,c as oe,e as Q,f as Je}from"../chunks/index.70316217.js";import{w as we}from"../chunks/index.760d9d51.js";const nt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function G(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function lt(s,e){I(s,1,1,()=>{e.delete(s.key)})}function st(s,e,n,t,l,i,o,a,r,u,c,_){let d=s.length,h=i.length,b=d;const p={};for(;b--;)p[s[b].key]=b;const f=[],g=new Map,E=new Map,v=[];for(b=h;b--;){const $=_(l,i,b),U=n($);let H=o.get(U);H?t&&v.push(()=>H.p($,e)):(H=u(U,$),H.c()),g.set(U,f[b]=H),U in p&&E.set(U,Math.abs(b-p[U]))}const M=new Set,R=new Set;function N($){O($,1),$.m(a,c),o.set($.key,$),c=$.first,h--}for(;d&&h;){const $=f[h-1],U=s[d-1],H=$.key,J=U.key;$===U?(c=$.first,d--,h--):g.has(J)?!o.has(H)||M.has(H)?N($):R.has(J)?d--:E.get(H)>E.get(J)?(R.add(H),N($)):(M.add(J),d--):(r(U,o),d--)}for(;d--;){const $=s[d];g.has($.key)||r($,o)}for(;h;)N(f[h-1]);return se(v),f}const rt=!0,ot=!1,en=Object.freeze(Object.defineProperty({__proto__:null,prerender:rt,ssr:ot},Symbol.toStringTag,{value:"Module"}));function it(s){let e,n,t,l,i,o,a,r,u,c="Invalid input",_,d,h,b,p,f="Ok",g,E,v="Cancel",M,R;return{c(){e=C("dialog"),n=C("div"),t=C("h1"),l=ie(s[0]),i=L(),o=C("p"),a=ie(s[1]),r=L(),u=C("p"),u.textContent=c,_=L(),d=C("form"),h=C("input"),b=L(),p=C("button"),p.textContent=f,g=L(),E=C("button"),E.textContent=v,this.h()},l(N){e=T(N,"DIALOG",{class:!0});var $=D(e);n=T($,"DIV",{class:!0});var U=D(n);t=T(U,"H1",{class:!0});var H=D(t);l=ae(H,s[0]),H.forEach(w),i=B(U),o=T(U,"P",{class:!0});var J=D(o);a=ae(J,s[1]),J.forEach(w),r=B(U),u=T(U,"P",{class:!0,"data-svelte-h":!0}),q(u)!=="svelte-1fg550y"&&(u.textContent=c),_=B(U),d=T(U,"FORM",{method:!0,class:!0});var X=D(d);h=T(X,"INPUT",{class:!0,type:!0}),b=B(X),p=T(X,"BUTTON",{class:!0,"data-svelte-h":!0}),q(p)!=="svelte-ehnyly"&&(p.textContent=f),g=B(X),E=T(X,"BUTTON",{class:!0,"data-svelte-h":!0}),q(E)!=="svelte-1nfr5kn"&&(E.textContent=v),X.forEach(w),U.forEach(w),$.forEach(w),this.h()},h(){k(t,"class","svelte-n1w0m1"),k(o,"class","svelte-n1w0m1"),k(u,"class","errorMessage svelte-n1w0m1"),de(u,"show",s[4]),k(h,"class","input svelte-n1w0m1"),k(h,"type","text"),de(h,"errored",s[4]),k(p,"class","ok svelte-n1w0m1"),p.value="default",k(E,"class","cancel svelte-n1w0m1"),E.value="cancel",k(d,"method","dialog"),k(d,"class","svelte-n1w0m1"),k(n,"class","dialog svelte-n1w0m1"),k(e,"class","svelte-n1w0m1")},m(N,$){S(N,e,$),y(e,n),y(n,t),y(t,l),y(n,i),y(n,o),y(o,a),y(n,r),y(n,u),y(n,_),y(n,d),y(d,h),he(h,s[3]),y(d,b),y(d,p),y(d,g),y(d,E),s[9](e),M||(R=[j(h,"input",s[8]),j(e,"close",s[5])],M=!0)},p(N,[$]){$&1&&ce(l,N[0]),$&2&&ce(a,N[1]),$&16&&de(u,"show",N[4]),$&8&&h.value!==N[3]&&he(h,N[3]),$&16&&de(h,"errored",N[4])},i:W,o:W,d(N){N&&w(e),s[9](null),M=!1,se(R)}}}function at(s,e,n){let{title:t}=e,{message:l}=e,{match:i=null}=e;const o=pe();let a,r,u=!1;function c(){n(3,r=""),n(4,u=!1),a.showModal()}function _(){if(a.returnValue==="default"){if(r===void 0||r===""){o("cancel");return}if(i!==null&&!i.test(r)){n(4,u=!0),a.showModal();return}o("ok",r)}else o("cancel")}function d(){r=this.value,n(3,r)}function h(b){Y[b?"unshift":"push"](()=>{a=b,n(2,a)})}return s.$$set=b=>{"title"in b&&n(0,t=b.title),"message"in b&&n(1,l=b.message),"match"in b&&n(6,i=b.match)},[t,l,a,r,u,_,i,c,d,h]}class ze extends te{constructor(e){super(),ne(this,e,at,it,ee,{title:0,message:1,match:6,open:7})}get open(){return this.$$.ctx[7]}}const ut=""+new URL("../assets/add.377faa19.svg",import.meta.url).href,ct=""+new URL("../assets/del.16504b92.svg",import.meta.url).href;function Ce(s,e,n){const t=s.slice();return t[13]=e[n],t[14]=e,t[15]=n,t}function Te(s){let e,n,t,l,i=`<img src="${ct}" alt="delete" class="svelte-5u0uf6"/>`,o,a;function r(){s[8].call(n,s[15])}function u(..._){return s[9](s[15],..._)}function c(){return s[10](s[15])}return{c(){e=C("li"),n=C("input"),t=L(),l=C("button"),l.innerHTML=i,this.h()},l(_){e=T(_,"LI",{class:!0});var d=D(e);n=T(d,"INPUT",{type:!0,class:!0}),t=B(d),l=T(d,"BUTTON",{class:!0,"data-svelte-h":!0}),q(l)!=="svelte-leavts"&&(l.innerHTML=i),d.forEach(w),this.h()},h(){k(n,"type","text"),k(n,"class","svelte-5u0uf6"),k(l,"class","prule__applications__removebutton svelte-5u0uf6"),k(e,"class","prule__applications__application svelte-5u0uf6")},m(_,d){S(_,e,d),y(e,n),he(n,s[0][s[15]]),y(e,t),y(e,l),o||(a=[j(n,"input",r),j(n,"input",u),j(l,"click",c)],o=!0)},p(_,d){s=_,d&1&&n.value!==s[0][s[15]]&&he(n,s[0][s[15]])},d(_){_&&w(e),o=!1,se(a)}}}function ft(s){let e,n,t=!1,l,i,o,a,r,u,c,_=`<img src="${ut}" alt="add" class="svelte-5u0uf6"/>`,d,h,b,p=G(s[0]),f=[];for(let g=0;g<p.length;g+=1)f[g]=Te(Ce(s,p,g));return d=Ke(s[7][0]),{c(){e=C("div"),n=C("input"),l=L(),i=C("h3"),o=ie(s[2]),a=L(),r=C("ul");for(let g=0;g<f.length;g+=1)f[g].c();u=L(),c=C("button"),c.innerHTML=_,this.h()},l(g){e=T(g,"DIV",{class:!0});var E=D(e);n=T(E,"INPUT",{class:!0,type:!0,name:!0}),l=B(E),i=T(E,"H3",{class:!0});var v=D(i);o=ae(v,s[2]),v.forEach(w),a=B(E),r=T(E,"UL",{class:!0});var M=D(r);for(let R=0;R<f.length;R+=1)f[R].l(M);u=B(M),c=T(M,"BUTTON",{class:!0,"data-svelte-h":!0}),q(c)!=="svelte-2vjw9w"&&(c.innerHTML=_),M.forEach(w),E.forEach(w),this.h()},h(){k(n,"class","prule__start svelte-5u0uf6"),k(n,"type","radio"),k(n,"name","ruleStart"),n.__value=s[2],he(n,n.__value),k(i,"class","prule__name svelte-5u0uf6"),k(c,"class","prule__applications__addbutton svelte-5u0uf6"),k(r,"class","prule__applications svelte-5u0uf6"),k(e,"class","prule svelte-5u0uf6"),d.p(n)},m(g,E){S(g,e,E),y(e,n),n.checked=n.__value===s[1],y(e,l),y(e,i),y(i,o),y(e,a),y(e,r);for(let v=0;v<f.length;v+=1)f[v]&&f[v].m(r,null);y(r,u),y(r,c),h||(b=[j(n,"change",s[6]),j(c,"click",s[4])],h=!0)},p(g,[E]){if(E&4&&(n.__value=g[2],he(n,n.__value),t=!0),(t||E&2)&&(n.checked=n.__value===g[1]),E&4&&ce(o,g[2]),E&41){p=G(g[0]);let v;for(v=0;v<p.length;v+=1){const M=Ce(g,p,v);f[v]?f[v].p(M,E):(f[v]=Te(M),f[v].c(),f[v].m(r,u))}for(;v<f.length;v+=1)f[v].d(1);f.length=p.length}},i:W,o:W,d(g){g&&w(e),me(f,g),d.r(),h=!1,se(b)}}}function dt(s,e,n){let{name:t}=e,{rules:l=[""]}=e,{group:i=""}=e;l.length===0&&(l=[""]);const o={position:0,rule:null};Fe(()=>{o.rule!==null&&(o.rule.focus(),o.rule.setSelectionRange(o.position,o.position)),o.rule=null});const a=pe();function r(f,g){if(f==null)return;const E=f,v=E.selectionStart;n(0,l[g]=E.value.replace(/epsilon/g,"ε"),l),v!==null&&l[g]!==E.value&&(console.log("cursor pos",v),o.position=v-6,o.rule=E),a("input",l)}function u(){n(0,l=[...l,""]),a("input",l)}function c(f){l.length===1?n(0,l=[""]):n(0,l=l.filter((g,E)=>E!==f)),a("input",l)}const _=[[]];function d(){i=this.__value,n(1,i)}function h(f){l[f]=this.value,n(0,l)}const b=(f,g)=>r(g.target,f),p=f=>c(f);return s.$$set=f=>{"name"in f&&n(2,t=f.name),"rules"in f&&n(0,l=f.rules),"group"in f&&n(1,i=f.group)},[l,i,t,r,u,c,d,_,h,b,p]}class _t extends te{constructor(e){super(),ne(this,e,dt,ft,ee,{name:2,rules:0,group:1})}}function ht(s,e){const n=[];return e.forEach(t=>{const l=[];t.split("").forEach((i,o)=>{s.productions.has(i)?l.push({letter:i,index:o}):i=="ε"?l.push(null):l.push(i)}),n.push(l)}),n}function pt(s,e){s.productions.forEach(n=>{n.forEach(t=>{t.forEach((l,i)=>{typeof l=="string"&&l==e&&(t[i]={letter:e,index:i})})})})}function mt(){const{subscribe:s,set:e,update:n}=we({productions:new Map,start:""});return{subscribe:s,set:e,update:n,reset:()=>e({productions:new Map,start:""}),addVariable:t=>n(l=>(l.productions.set(t,[]),l)),removeVariable:t=>n(l=>(l.productions.delete(t),l)),setProduction:(t,l)=>n(i=>(i.productions.set(t,ht(i,l)),pt(i,t),i)),setStart:t=>n(l=>(l.start=t,l)),toJSON:()=>{const t=Ze(le);return{productions:Object.fromEntries(t.productions),start:t.start}},fromJSON:t=>{const l=t;if(!l.productions||!l.start)throw new Error("Invalid grammar: missing fields");if(l.productions=new Map(Object.entries(l.productions)),l.productions.size==0||l.start=="")throw new Error("Invalid grammar: empty fields");if(!l.productions.has(l.start))throw new Error("Invalid grammar: no start symbol");for(const[i,o]of l.productions){if(i.length!=1)throw new Error("Invalid grammar: invalid variable");for(const a of o)for(const[r,u]of a.entries())if(u!==null){if(typeof u=="string"&&u.length!=1)throw new Error("Invalid grammar: invalid terminal");if(typeof u!="string"){if(!l.productions.has(u.letter))throw new Error("Invalid grammar: invalid variable");if(u.index!=r)throw new Error("Invalid grammar: invalid variable index")}}}e(l)}}}const le=mt();function Me(s){return s.map(e=>e===null?"ε":typeof e=="string"?e:e.letter).join("")}function Ne(s,e,n){const t=s.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function $e(s){var a;let e,n,t;function l(r){s[2](r)}function i(...r){return s[3](s[7],...r)}let o={name:s[7],rules:(a=s[1].productions.get(s[7]))==null?void 0:a.map(Me)};return s[1].start!==void 0&&(o.group=s[1].start),e=new _t({props:o}),Y.push(()=>Je(e,"group",l)),e.$on("input",i),{c(){K(e.$$.fragment)},l(r){F(e.$$.fragment,r)},m(r,u){Z(e,r,u),t=!0},p(r,u){var _;s=r;const c={};u&2&&(c.name=s[7]),u&2&&(c.rules=(_=s[1].productions.get(s[7]))==null?void 0:_.map(Me)),!n&&u&2&&(n=!0,c.group=s[1].start,He(()=>n=!1)),e.$set(c)},i(r){t||(O(e.$$.fragment,r),t=!0)},o(r){I(e.$$.fragment,r),t=!1},d(r){Q(e,r)}}}function gt(s){let e,n,t="<h2>Production rules</h2>",l,i,o,a,r,u="Add production rule",c,_,d,h,b,p=G(s[1].productions),f=[];for(let v=0;v<p.length;v+=1)f[v]=$e(Ne(s,p,v));const g=v=>I(f[v],1,1,()=>{f[v]=null});let E={title:"Add production rule",message:"Enter the name of the new production rule",match:/^[a-zA-Z]$/};return _=new ze({props:E}),s[5](_),_.$on("ok",s[6]),{c(){e=C("nav"),n=C("div"),n.innerHTML=t,l=L(),i=C("div");for(let v=0;v<f.length;v+=1)f[v].c();o=L(),a=C("div"),r=C("button"),r.textContent=u,c=L(),K(_.$$.fragment),this.h()},l(v){e=T(v,"NAV",{class:!0});var M=D(e);n=T(M,"DIV",{class:!0,"data-svelte-h":!0}),q(n)!=="svelte-irhesm"&&(n.innerHTML=t),l=B(M),i=T(M,"DIV",{class:!0});var R=D(i);for(let $=0;$<f.length;$+=1)f[$].l(R);R.forEach(w),o=B(M),a=T(M,"DIV",{class:!0});var N=D(a);r=T(N,"BUTTON",{class:!0,"data-svelte-h":!0}),q(r)!=="svelte-1knfucn"&&(r.textContent=u),N.forEach(w),c=B(M),F(_.$$.fragment,M),M.forEach(w),this.h()},h(){k(n,"class","productionRules__top svelte-15dbb21"),k(i,"class","productionRules__container svelte-15dbb21"),k(r,"class","productionRules__bottom__addButton svelte-15dbb21"),k(a,"class","productionRules__bottom svelte-15dbb21"),k(e,"class","productionRules svelte-15dbb21")},m(v,M){S(v,e,M),y(e,n),y(e,l),y(e,i);for(let R=0;R<f.length;R+=1)f[R]&&f[R].m(i,null);y(e,o),y(e,a),y(a,r),y(e,c),Z(_,e,null),d=!0,h||(b=j(r,"click",s[4]),h=!0)},p(v,[M]){if(M&2){p=G(v[1].productions);let N;for(N=0;N<p.length;N+=1){const $=Ne(v,p,N);f[N]?(f[N].p($,M),O(f[N],1)):(f[N]=$e($),f[N].c(),O(f[N],1),f[N].m(i,null))}for(re(),N=p.length;N<f.length;N+=1)g(N);oe()}const R={};_.$set(R)},i(v){if(!d){for(let M=0;M<p.length;M+=1)O(f[M]);O(_.$$.fragment,v),d=!0}},o(v){f=f.filter(Boolean);for(let M=0;M<f.length;M+=1)I(f[M]);I(_.$$.fragment,v),d=!1},d(v){v&&w(e),me(f,v),s[5](null),Q(_),h=!1,b()}}}function vt(s,e,n){let t;ge(s,le,c=>n(1,t=c));let l;function i(c){s.$$.not_equal(t.start,c)&&(t.start=c,le.set(t))}const o=(c,_)=>le.setProduction(c,_.detail),a=()=>l.open();function r(c){Y[c?"unshift":"push"](()=>{l=c,n(0,l)})}return[l,t,i,o,a,r,c=>le.setProduction(c.detail,[""])]}class bt extends te{constructor(e){super(),ne(this,e,vt,gt,ee,{})}}function kt(s){let e,n=s[0].letter+"",t,l,i;return{c(){e=C("span"),t=ie(n),this.h()},l(o){e=T(o,"SPAN",{class:!0,tabindex:!0,role:!0});var a=D(e);t=ae(a,n),a.forEach(w),this.h()},h(){k(e,"class","nonterminal svelte-1gobc4g"),k(e,"tabindex",s[1]),k(e,"role","button")},m(o,a){S(o,e,a),y(e,t),l||(i=[j(e,"keypress",s[4]),j(e,"click",function(){Qe(s[2](s[0]))&&s[2](s[0]).apply(this,arguments)})],l=!0)},p(o,a){s=o,a&1&&n!==(n=s[0].letter+"")&&ce(t,n),a&2&&k(e,"tabindex",s[1])},d(o){o&&w(e),l=!1,se(i)}}}function wt(s){let e;function n(i,o){return i[0]===" "?Ct:Et}let t=n(s),l=t(s);return{c(){l.c(),e=x()},l(i){l.l(i),e=x()},m(i,o){l.m(i,o),S(i,e,o)},p(i,o){t===(t=n(i))&&l?l.p(i,o):(l.d(1),l=t(i),l&&(l.c(),l.m(e.parentNode,e)))},d(i){i&&w(e),l.d(i)}}}function yt(s){let e,n="ε";return{c(){e=C("span"),e.textContent=n,this.h()},l(t){e=T(t,"SPAN",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-1rb8g4u"&&(e.textContent=n),this.h()},h(){k(e,"class","terminal")},m(t,l){S(t,e,l)},p:W,d(t){t&&w(e)}}}function Et(s){let e,n;return{c(){e=C("span"),n=ie(s[0]),this.h()},l(t){e=T(t,"SPAN",{class:!0});var l=D(e);n=ae(l,s[0]),l.forEach(w),this.h()},h(){k(e,"class","terminal")},m(t,l){S(t,e,l),y(e,n)},p(t,l){l&1&&ce(n,t[0])},d(t){t&&w(e)}}}function Ct(s){let e,n="␣";return{c(){e=C("span"),e.textContent=n,this.h()},l(t){e=T(t,"SPAN",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-1lgi7go"&&(e.textContent=n),this.h()},h(){k(e,"class","terminal")},m(t,l){S(t,e,l)},p:W,d(t){t&&w(e)}}}function Tt(s){let e;function n(i,o){return i[0]===null?yt:typeof i[0]=="string"?wt:kt}let t=n(s),l=t(s);return{c(){l.c(),e=x()},l(i){l.l(i),e=x()},m(i,o){l.m(i,o),S(i,e,o)},p(i,[o]){t===(t=n(i))&&l?l.p(i,o):(l.d(1),l=t(i),l&&(l.c(),l.m(e.parentNode,e)))},i:W,o:W,d(i){i&&w(e),l.d(i)}}}function Mt(s,e,n){let{symbol:t=null}=e,{tabindex:l=-1}=e,i=pe();function o(u){i("nonterminal",u)}function a(u,c){u.key==="Enter"&&i("nonterminal",c)}const r=u=>a(u,t);return s.$$set=u=>{"symbol"in u&&n(0,t=u.symbol),"tabindex"in u&&n(1,l=u.tabindex)},[t,l,o,a,r]}let ye=class extends te{constructor(e){super(),ne(this,e,Mt,Tt,ee,{symbol:0,tabindex:1})}};function Oe(s,e,n){const t=s.slice();return t[9]=e[n],t}function Pe(s){let e,n;return e=new ye({props:{symbol:s[9],tabindex:s[2]}}),e.$on("nonterminal",s[6]),{c(){K(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,l){Z(e,t,l),n=!0},p(t,l){const i={};l&1&&(i.symbol=t[9]),l&4&&(i.tabindex=t[2]),e.$set(i)},i(t){n||(O(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Nt(s){let e,n,t=G(s[0]),l=[];for(let o=0;o<t.length;o+=1)l[o]=Pe(Oe(s,t,o));const i=o=>I(l[o],1,1,()=>{l[o]=null});return{c(){e=C("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=T(o,"DIV",{class:!0});var a=D(e);for(let r=0;r<l.length;r+=1)l[r].l(a);a.forEach(w),this.h()},h(){k(e,"class","rule_display svelte-1ybpif1"),de(e,"wrap",s[3])},m(o,a){S(o,e,a);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null);s[7](e),n=!0},p(o,[a]){if(a&21){t=G(o[0]);let r;for(r=0;r<t.length;r+=1){const u=Oe(o,t,r);l[r]?(l[r].p(u,a),O(l[r],1)):(l[r]=Pe(u),l[r].c(),O(l[r],1),l[r].m(e,null))}for(re(),r=t.length;r<l.length;r+=1)i(r);oe()}(!n||a&8)&&de(e,"wrap",o[3])},i(o){if(!n){for(let a=0;a<t.length;a+=1)O(l[a]);n=!0}},o(o){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)I(l[a]);n=!1},d(o){o&&w(e),me(l,o),s[7](null)}}}function $t(s,e,n){let t;ge(s,le,d=>n(5,t=d));let{rule:l=[]}=e,{tabindex:i}=e,{node:o=void 0}=e,{allowWrap:a=!1}=e,r=pe();function u(d){r("nonterminal",d)}const c=d=>u(d.detail);function _(d){Y[d?"unshift":"push"](()=>{o=d,n(1,o)})}return s.$$set=d=>{"rule"in d&&n(0,l=d.rule),"tabindex"in d&&n(2,i=d.tabindex),"node"in d&&n(1,o=d.node),"allowWrap"in d&&n(3,a=d.allowWrap)},s.$$.update=()=>{s.$$.dirty&32&&(t.start===""?n(0,l=[]):n(0,l=[{letter:t.start,index:0}]))},[l,o,i,a,u,t,c,_]}class Ot extends te{constructor(e){super(),ne(this,e,$t,Nt,ee,{rule:0,tabindex:2,node:1,allowWrap:3})}}function Pt(s){let e,n,t,l,i;const o=s[3].default,a=Xe(o,s,s[2],null);return{c(){e=L(),n=C("div"),a&&a.c()},l(r){e=B(r),n=T(r,"DIV",{});var u=D(n);a&&a.l(u),u.forEach(w)},m(r,u){S(r,e,u),S(r,n,u),a&&a.m(n,null),s[4](n),t=!0,l||(i=j(document,"click",s[1]),l=!0)},p(r,[u]){a&&a.p&&(!t||u&4)&&Ye(a,o,r,r[2],t?et(o,r[2],u,null):xe(r[2]),null)},i(r){t||(O(a,r),t=!0)},o(r){I(a,r),t=!1},d(r){r&&(w(e),w(n)),a&&a.d(r),s[4](null),l=!1,i()}}}function Rt(s,e,n){let{$$slots:t={},$$scope:l}=e,i=null,o=pe();function a(u){i&&!i.contains(u.target)&&o("clickOutside",u.target)}function r(u){Y[u?"unshift":"push"](()=>{i=u,n(0,i)})}return s.$$set=u=>{"$$scope"in u&&n(2,l=u.$$scope)},[i,a,l,t,r]}class It extends te{constructor(e){super(),ne(this,e,Rt,Pt,ee,{})}}const _e=we([]);function St(){const{subscribe:s,set:e,update:n}=we([]);return{subscribe:s,set:e,update:n,reset:()=>e([]),restore:t=>n(l=>(_e.set(l[t]),l.slice(0,t+1))),addRule:t=>n(l=>[...l,t]),removeRule:()=>n(t=>t.length<2?t:(_e.set(t[t.length-2]),t.slice(0,-1)))}}const ue=St();function Dt(s){let e,n,t,l,i,o,a,r,u,c="Ok",_,d;return{c(){e=C("dialog"),n=C("form"),t=C("h1"),l=ie(s[0]),i=L(),o=C("p"),a=ie(s[1]),r=L(),u=C("button"),u.textContent=c,this.h()},l(h){e=T(h,"DIALOG",{class:!0});var b=D(e);n=T(b,"FORM",{class:!0,method:!0});var p=D(n);t=T(p,"H1",{class:!0});var f=D(t);l=ae(f,s[0]),f.forEach(w),i=B(p),o=T(p,"P",{});var g=D(o);a=ae(g,s[1]),g.forEach(w),r=B(p),u=T(p,"BUTTON",{class:!0,"data-svelte-h":!0}),q(u)!=="svelte-ehnyly"&&(u.textContent=c),p.forEach(w),b.forEach(w),this.h()},h(){k(t,"class","svelte-1v8wgvi"),k(u,"class","ok svelte-1v8wgvi"),u.value="default",k(n,"class","dialog svelte-1v8wgvi"),k(n,"method","dialog"),k(e,"class","svelte-1v8wgvi")},m(h,b){S(h,e,b),y(e,n),y(n,t),y(t,l),y(n,i),y(n,o),y(o,a),y(n,r),y(n,u),s[5](e),_||(d=[j(n,"submit",s[3]),j(e,"close",s[3])],_=!0)},p(h,[b]){b&1&&ce(l,h[0]),b&2&&ce(a,h[1])},i:W,o:W,d(h){h&&w(e),s[5](null),_=!1,se(d)}}}function Lt(s,e,n){let{title:t}=e,{message:l}=e;const i=pe();let o;function a(){o.showModal()}function r(){i("ok")}function u(c){Y[c?"unshift":"push"](()=>{o=c,n(2,o)})}return s.$$set=c=>{"title"in c&&n(0,t=c.title),"message"in c&&n(1,l=c.message)},[t,l,o,r,a,u]}class Bt extends te{constructor(e){super(),ne(this,e,Lt,Dt,ee,{title:0,message:1,open:4})}get open(){return this.$$.ctx[4]}}function Re(s,e,n){const t=s.slice();return t[6]=e[n],t[8]=n,t}function Ie(s,e,n){const t=s.slice();return t[9]=e[n],t}function Ut(s){let e=[],n=new Map,t,l,i=G(s[1]);const o=a=>a[6].length;for(let a=0;a<i.length;a+=1){let r=Re(s,i,a),u=o(r);n.set(u,e[a]=Le(u,r))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();t=x()},l(a){for(let r=0;r<e.length;r+=1)e[r].l(a);t=x()},m(a,r){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(a,r);S(a,t,r),l=!0},p(a,r){r&6&&(i=G(a[1]),re(),e=st(e,r,o,1,a,i,n,t.parentNode,lt,Le,t,Re),oe())},i(a){if(!l){for(let r=0;r<i.length;r+=1)O(e[r]);l=!0}},o(a){for(let r=0;r<e.length;r+=1)I(e[r]);l=!1},d(a){a&&w(t);for(let r=0;r<e.length;r+=1)e[r].d(a)}}}function Vt(s){let e,n="Click on a non terminal symbol to start";return{c(){e=C("p"),e.textContent=n,this.h()},l(t){e=T(t,"P",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-2m14de"&&(e.textContent=n),this.h()},h(){k(e,"class","svelte-tkr9nq")},m(t,l){S(t,e,l)},p:W,i:W,o:W,d(t){t&&w(e)}}}function Se(s){let e,n;return e=new ye({props:{symbol:s[9],tabindex:0}}),{c(){K(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,l){Z(e,t,l),n=!0},p(t,l){const i={};l&2&&(i.symbol=t[9]),e.$set(i)},i(t){n||(O(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function De(s){let e,n='<svg width="30" height="30" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 25H50" stroke="black" stroke-width="2"></path><path d="M40 15L50 25L40 35" stroke="black" stroke-width="2"></path></svg> ';return{c(){e=C("div"),e.innerHTML=n,this.h()},l(t){e=T(t,"DIV",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-14gk61i"&&(e.innerHTML=n),this.h()},h(){k(e,"class","arrow")},m(t,l){S(t,e,l)},d(t){t&&w(e)}}}function Le(s,e){let n,t,l,i,o,a,r,u=G(e[1][e[8]]),c=[];for(let p=0;p<u.length;p+=1)c[p]=Se(Ie(e,u,p));const _=p=>I(c[p],1,1,()=>{c[p]=null});function d(){return e[3](e[8])}function h(...p){return e[4](e[8],...p)}let b=e[8]!=e[1].length-1&&De();return{key:s,first:null,c(){n=C("div");for(let p=0;p<c.length;p+=1)c[p].c();l=L(),b&&b.c(),i=x(),this.h()},l(p){n=T(p,"DIV",{class:!0,role:!0,tabindex:!0,id:!0});var f=D(n);for(let g=0;g<c.length;g+=1)c[g].l(f);f.forEach(w),l=B(p),b&&b.l(p),i=x(),this.h()},h(){k(n,"class","derivationTree__derivation svelte-tkr9nq"),k(n,"role","button"),k(n,"tabindex","0"),k(n,"id",t=`derivationTree__derivation-${e[6].length}`),this.first=n},m(p,f){S(p,n,f);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(n,null);S(p,l,f),b&&b.m(p,f),S(p,i,f),o=!0,a||(r=[j(n,"click",d),j(n,"keypress",h)],a=!0)},p(p,f){if(e=p,f&2){u=G(e[1][e[8]]);let g;for(g=0;g<u.length;g+=1){const E=Ie(e,u,g);c[g]?(c[g].p(E,f),O(c[g],1)):(c[g]=Se(E),c[g].c(),O(c[g],1),c[g].m(n,null))}for(re(),g=u.length;g<c.length;g+=1)_(g);oe()}(!o||f&2&&t!==(t=`derivationTree__derivation-${e[6].length}`))&&k(n,"id",t),e[8]!=e[1].length-1?b||(b=De(),b.c(),b.m(i.parentNode,i)):b&&(b.d(1),b=null)},i(p){if(!o){for(let f=0;f<u.length;f+=1)O(c[f]);o=!0}},o(p){c=c.filter(Boolean);for(let f=0;f<c.length;f+=1)I(c[f]);o=!1},d(p){p&&(w(n),w(l),w(i)),me(c,p),b&&b.d(p),a=!1,se(r)}}}function jt(s){let e,n,t,l;const i=[Vt,Ut],o=[];function a(r,u){return r[1].length==0?0:1}return n=a(s),t=o[n]=i[n](s),{c(){e=C("nav"),t.c(),this.h()},l(r){e=T(r,"NAV",{class:!0});var u=D(e);t.l(u),u.forEach(w),this.h()},h(){k(e,"class","derivationTree svelte-tkr9nq")},m(r,u){S(r,e,u),o[n].m(e,null),s[5](e),l=!0},p(r,[u]){let c=n;n=a(r),n===c?o[n].p(r,u):(re(),I(o[c],1,1,()=>{o[c]=null}),oe(),t=o[n],t?t.p(r,u):(t=o[n]=i[n](r),t.c()),O(t,1),t.m(e,null))},i(r){l||(O(t),l=!0)},o(r){I(t),l=!1},d(r){r&&w(e),o[n].d(),s[5](null)}}}function At(s,e,n){let t;ge(s,ue,u=>n(1,t=u));function l(u,c){u.key=="Enter"&&ue.restore(c)}let i=null;const o=u=>ue.restore(u),a=(u,c)=>l(c,u);function r(u){Y[u?"unshift":"push"](()=>{i=u,n(0,i)})}return s.$$.update=()=>{s.$$.dirty&3&&tt().then(()=>{i&&i.scrollTo({left:i.scrollWidth,behavior:"smooth"})})},[i,t,l,o,a,r]}class Ht extends te{constructor(e){super(),ne(this,e,At,jt,ee,{})}}const{document:Jt}=nt;function Be(s,e,n){const t=s.slice();return t[28]=e[n],t}function Ue(s,e,n){const t=s.slice();return t[31]=e[n],t}function zt(s){let e,n,t,l,i;e=new It({props:{$$slots:{default:[qt]},$$scope:{ctx:s}}}),e.$on("clickOutside",s[18]);function o(r){s[19](r)}let a={rule:s[7],tabindex:0,allowWrap:!0};return s[2]!==void 0&&(a.node=s[2]),t=new Ot({props:a}),Y.push(()=>Je(t,"node",o)),t.$on("nonterminal",s[20]),{c(){K(e.$$.fragment),n=L(),K(t.$$.fragment)},l(r){F(e.$$.fragment,r),n=B(r),F(t.$$.fragment,r)},m(r,u){Z(e,r,u),S(r,n,u),Z(t,r,u),i=!0},p(r,u){const c={};u[0]&66|u[1]&8&&(c.$$scope={dirty:u,ctx:r}),e.$set(c);const _={};u[0]&128&&(_.rule=r[7]),!l&&u[0]&4&&(l=!0,_.node=r[2],He(()=>l=!1)),t.$set(_)},i(r){i||(O(e.$$.fragment,r),O(t.$$.fragment,r),i=!0)},o(r){I(e.$$.fragment,r),I(t.$$.fragment,r),i=!1},d(r){r&&w(n),Q(e,r),Q(t,r)}}}function Wt(s){let e;return{c(){e=ie("No start symbol")},l(n){e=ae(n,"No start symbol")},m(n,t){S(n,e,t)},p:W,i:W,o:W,d(n){n&&w(e)}}}function Ve(s){let e,n,t=G(s[1]),l=[];for(let o=0;o<t.length;o+=1)l[o]=Ae(Be(s,t,o));const i=o=>I(l[o],1,1,()=>{l[o]=null});return{c(){e=C("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=T(o,"DIV",{class:!0});var a=D(e);for(let r=0;r<l.length;r+=1)l[r].l(a);a.forEach(w),this.h()},h(){k(e,"class","possibilities svelte-1lvc58u")},m(o,a){S(o,e,a);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null);n=!0},p(o,a){if(a[0]&3074){t=G(o[1]);let r;for(r=0;r<t.length;r+=1){const u=Be(o,t,r);l[r]?(l[r].p(u,a),O(l[r],1)):(l[r]=Ae(u),l[r].c(),O(l[r],1),l[r].m(e,null))}for(re(),r=t.length;r<l.length;r+=1)i(r);oe()}},i(o){if(!n){for(let a=0;a<t.length;a+=1)O(l[a]);n=!0}},o(o){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)I(l[a]);n=!1},d(o){o&&w(e),me(l,o)}}}function je(s){let e,n;return e=new ye({props:{symbol:s[31]}}),{c(){K(e.$$.fragment)},l(t){F(e.$$.fragment,t)},m(t,l){Z(e,t,l),n=!0},p(t,l){const i={};l[0]&2&&(i.symbol=t[31]),e.$set(i)},i(t){n||(O(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){Q(e,t)}}}function Ae(s){let e,n,t,l,i,o=G(s[28].rule),a=[];for(let _=0;_<o.length;_+=1)a[_]=je(Ue(s,o,_));const r=_=>I(a[_],1,1,()=>{a[_]=null});function u(){return s[16](s[28])}function c(..._){return s[17](s[28],..._)}return{c(){e=C("div");for(let _=0;_<a.length;_+=1)a[_].c();n=L(),this.h()},l(_){e=T(_,"DIV",{class:!0,tabindex:!0,role:!0});var d=D(e);for(let h=0;h<a.length;h+=1)a[h].l(d);n=B(d),d.forEach(w),this.h()},h(){k(e,"class","possibility svelte-1lvc58u"),k(e,"tabindex","0"),k(e,"role","button")},m(_,d){S(_,e,d);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(e,null);y(e,n),t=!0,l||(i=[j(e,"click",u),j(e,"keypress",c)],l=!0)},p(_,d){if(s=_,d[0]&2){o=G(s[28].rule);let h;for(h=0;h<o.length;h+=1){const b=Ue(s,o,h);a[h]?(a[h].p(b,d),O(a[h],1)):(a[h]=je(b),a[h].c(),O(a[h],1),a[h].m(e,n))}for(re(),h=o.length;h<a.length;h+=1)r(h);oe()}},i(_){if(!t){for(let d=0;d<o.length;d+=1)O(a[d]);t=!0}},o(_){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)I(a[d]);t=!1},d(_){_&&w(e),me(a,_),l=!1,se(i)}}}function qt(s){let e,n,t=s[6]&&Ve(s);return{c(){t&&t.c(),e=x()},l(l){t&&t.l(l),e=x()},m(l,i){t&&t.m(l,i),S(l,e,i),n=!0},p(l,i){l[6]?t?(t.p(l,i),i[0]&64&&O(t,1)):(t=Ve(l),t.c(),O(t,1),t.m(e.parentNode,e)):t&&(re(),I(t,1,1,()=>{t=null}),oe())},i(l){n||(O(t),n=!0)},o(l){I(t),n=!1},d(l){l&&w(e),t&&t.d(l)}}}function Gt(s){let e,n,t,l,i,o,a,r,u,c,_="Reset",d,h,b="Save",p,f,g="Load",E,v,M,R,N,$,U;t=new Ht({});const H=[Wt,zt],J=[];function X(P,m){return P[0].start===""?0:1}o=X(s),a=J[o]=H[o](s);let ve={title:"Import Error",message:s[3]};v=new Bt({props:ve}),s[24](v),v.$on("ok",s[25]);let be={title:"Grammar Name",message:"Enter the name of the grammar"};return R=new ze({props:be}),s[26](R),R.$on("ok",s[27]),{c(){e=L(),n=C("div"),K(t.$$.fragment),l=L(),i=C("div"),a.c(),r=L(),u=C("nav"),c=C("button"),c.textContent=_,d=L(),h=C("button"),h.textContent=b,p=L(),f=C("button"),f.textContent=g,E=L(),K(v.$$.fragment),M=L(),K(R.$$.fragment),this.h()},l(P){e=B(P),n=T(P,"DIV",{class:!0});var m=D(n);F(t.$$.fragment,m),l=B(m),i=T(m,"DIV",{class:!0});var V=D(i);a.l(V),V.forEach(w),r=B(m),u=T(m,"NAV",{class:!0});var z=D(u);c=T(z,"BUTTON",{class:!0,"data-svelte-h":!0}),q(c)!=="svelte-rhidub"&&(c.textContent=_),d=B(z),h=T(z,"BUTTON",{class:!0,"data-svelte-h":!0}),q(h)!=="svelte-1bjhmza"&&(h.textContent=b),p=B(z),f=T(z,"BUTTON",{class:!0,"data-svelte-h":!0}),q(f)!=="svelte-ca8w"&&(f.textContent=g),z.forEach(w),m.forEach(w),E=B(P),F(v.$$.fragment,P),M=B(P),F(R.$$.fragment,P),this.h()},h(){k(i,"class","manipulator svelte-1lvc58u"),k(c,"class","svelte-1lvc58u"),k(h,"class","svelte-1lvc58u"),k(f,"class","svelte-1lvc58u"),k(u,"class","floating_nav svelte-1lvc58u"),k(n,"class","manipulator_contener svelte-1lvc58u")},m(P,m){S(P,e,m),S(P,n,m),Z(t,n,null),y(n,l),y(n,i),J[o].m(i,null),y(n,r),y(n,u),y(u,c),y(u,d),y(u,h),y(u,p),y(u,f),S(P,E,m),Z(v,P,m),S(P,M,m),Z(R,P,m),N=!0,$||(U=[j(Jt.body,"keydown",s[15]),j(c,"click",s[21]),j(h,"click",s[22]),j(f,"click",s[23])],$=!0)},p(P,m){let V=o;o=X(P),o===V?J[o].p(P,m):(re(),I(J[V],1,1,()=>{J[V]=null}),oe(),a=J[o],a?a.p(P,m):(a=J[o]=H[o](P),a.c()),O(a,1),a.m(i,null));const z={};m[0]&8&&(z.message=P[3]),v.$set(z);const A={};R.$set(A)},i(P){N||(O(t.$$.fragment,P),O(a),O(v.$$.fragment,P),O(R.$$.fragment,P),N=!0)},o(P){I(t.$$.fragment,P),I(a),I(v.$$.fragment,P),I(R.$$.fragment,P),N=!1},d(P){P&&(w(e),w(n),w(E),w(M)),Q(t),J[o].d(),s[24](null),Q(v,P),s[26](null),Q(R,P),$=!1,se(U)}}}function Kt(s,e,n){let t,l;ge(s,_e,m=>n(7,t=m)),ge(s,le,m=>n(0,l=m));let i=[],o,a="",r,u;function c(){ke(_e,t=[{letter:l.start,index:0}],t),ue.reset(),ue.addRule(t)}let _=!1;function d(m){n(6,_=!0),n(1,i=l.productions.get(m.letter).map(V=>({index:m.index,rule:V})))}function h(m,V){m.repeat||m.key=="Enter"&&b(V)}function b(m){let V=t,z=V.slice(0,m.index);z=z.concat(m.rule.map(A=>A&&typeof A!="string"?{letter:A.letter,index:A.index+m.index}:A)),V=z.concat(V.slice(m.index+1).map(A=>A&&typeof A!="string"?{letter:A.letter,index:A.index+m.rule.length-1}:A)),ke(_e,t=V,t),ue.addRule(V),n(6,_=!1)}function p(m){o&&o.contains(m)||n(6,_=!1)}function f(m){let V=le.toJSON(),z=new Blob([JSON.stringify(V)],{type:"application/json"}),A=URL.createObjectURL(z),fe=document.createElement("a");fe.href=A,fe.download=`${m}.json`,fe.click(),URL.revokeObjectURL(A)}function g(){let m=document.createElement("input");m.type="file",m.accept="application/json",m.onchange=V=>{var fe;let z=(fe=V.target.files)==null?void 0:fe[0];if(!z)return;let A=new FileReader;A.onload=We=>{var Ee;let qe=JSON.parse((Ee=We.target)==null?void 0:Ee.result);try{le.fromJSON(qe)}catch(Ge){n(3,a=Ge.message),r.open()}},A.readAsText(z)},m.click()}function E(m){if(m.key=="z"&&m.ctrlKey)return ue.removeRule(),m.stopPropagation(),m.preventDefault(),!1;if(m.key=="s"&&m.ctrlKey)return u.open(),m.stopPropagation(),m.preventDefault(),!1;if(m.key=="l"&&m.ctrlKey)return g(),m.stopPropagation(),m.preventDefault(),!1}const v=m=>b(m),M=(m,V)=>h(V,m),R=m=>p(m.detail);function N(m){o=m,n(2,o)}const $=m=>d(m.detail),U=()=>c(),H=()=>u.open(),J=()=>g();function X(m){Y[m?"unshift":"push"](()=>{r=m,n(4,r)})}const ve=()=>n(3,a="");function be(m){Y[m?"unshift":"push"](()=>{u=m,n(5,u)})}const P=m=>f(m.detail);return s.$$.update=()=>{s.$$.dirty[0]&1&&(l.start===""?ke(_e,t=[],t):c())},[l,i,o,a,r,u,_,t,c,d,h,b,p,f,g,E,v,M,R,N,$,U,H,J,X,ve,be,P]}class Ft extends te{constructor(e){super(),ne(this,e,Kt,Gt,ee,{},null,[-1,-1])}}function Zt(s){let e,n,t,l;return e=new bt({}),t=new Ft({}),{c(){K(e.$$.fragment),n=L(),K(t.$$.fragment)},l(i){F(e.$$.fragment,i),n=B(i),F(t.$$.fragment,i)},m(i,o){Z(e,i,o),S(i,n,o),Z(t,i,o),l=!0},p:W,i(i){l||(O(e.$$.fragment,i),O(t.$$.fragment,i),l=!0)},o(i){I(e.$$.fragment,i),I(t.$$.fragment,i),l=!1},d(i){i&&w(n),Q(e,i),Q(t,i)}}}class nn extends te{constructor(e){super(),ne(this,e,null,Zt,ee,{})}}export{nn as component,en as universal};
