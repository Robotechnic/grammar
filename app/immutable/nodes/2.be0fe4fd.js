import{s as F,f as E,l as Q,a as S,g as $,h as N,m as W,d as w,c as V,u as U,j as y,B as re,i as B,y as k,C as X,D as O,n as ee,z as M,E as te,F as ne,p as le,G as Ce,H as se,b as Ee,A as ie,e as oe,I as $e,r as Pe,v as Te,w as Ne,x as Ie,J as Se}from"../chunks/scheduler.77a4d2e3.js";import{S as q,i as J,b as L,d as j,m as z,a as T,g as Y,c as x,t as I,e as G,f as Ve}from"../chunks/index.443097ea.js";import{w as Be}from"../chunks/index.60116661.js";function A(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}const De=!0,Oe=!1,ht=Object.freeze(Object.defineProperty({__proto__:null,prerender:De,ssr:Oe},Symbol.toStringTag,{value:"Module"}));function Me(s){let e,n,l,t,o,i,u,r,f,d="Invalid input",_,h,m,C,p,P="Ok",g,c,a="Cancel",b,v;return{c(){e=E("dialog"),n=E("div"),l=E("h1"),t=Q(s[0]),o=S(),i=E("p"),u=Q(s[1]),r=S(),f=E("p"),f.textContent=d,_=S(),h=E("form"),m=E("input"),C=S(),p=E("button"),p.textContent=P,g=S(),c=E("button"),c.textContent=a,this.h()},l(D){e=$(D,"DIALOG",{class:!0});var R=N(e);n=$(R,"DIV",{class:!0});var H=N(n);l=$(H,"H1",{class:!0});var ue=N(l);t=W(ue,s[0]),ue.forEach(w),o=V(H),i=$(H,"P",{class:!0});var ae=N(i);u=W(ae,s[1]),ae.forEach(w),r=V(H),f=$(H,"P",{class:!0,"data-svelte-h":!0}),U(f)!=="svelte-1fg550y"&&(f.textContent=d),_=V(H),h=$(H,"FORM",{method:!0,class:!0});var Z=N(h);m=$(Z,"INPUT",{class:!0,type:!0}),C=V(Z),p=$(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),U(p)!=="svelte-ehnyly"&&(p.textContent=P),g=V(Z),c=$(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),U(c)!=="svelte-1nfr5kn"&&(c.textContent=a),Z.forEach(w),H.forEach(w),R.forEach(w),this.h()},h(){y(l,"class","svelte-n1w0m1"),y(i,"class","svelte-n1w0m1"),y(f,"class","errorMessage svelte-n1w0m1"),re(f,"show",s[4]),y(m,"class","input svelte-n1w0m1"),y(m,"type","text"),re(m,"errored",s[4]),y(p,"class","ok svelte-n1w0m1"),p.value="default",y(c,"class","cancel svelte-n1w0m1"),c.value="cancel",y(h,"method","dialog"),y(h,"class","svelte-n1w0m1"),y(n,"class","dialog svelte-n1w0m1"),y(e,"class","svelte-n1w0m1")},m(D,R){B(D,e,R),k(e,n),k(n,l),k(l,t),k(n,o),k(n,i),k(i,u),k(n,r),k(n,f),k(n,_),k(n,h),k(h,m),X(m,s[3]),k(h,C),k(h,p),k(h,g),k(h,c),s[9](e),b||(v=[O(m,"input",s[8]),O(e,"close",s[5])],b=!0)},p(D,[R]){R&1&&ee(t,D[0]),R&2&&ee(u,D[1]),R&16&&re(f,"show",D[4]),R&8&&m.value!==D[3]&&X(m,D[3]),R&16&&re(m,"errored",D[4])},i:M,o:M,d(D){D&&w(e),s[9](null),b=!1,te(v)}}}function Re(s,e,n){let{title:l}=e,{message:t}=e,{match:o=null}=e;const i=ne();let u,r,f=!1;function d(){n(3,r=""),n(4,f=!1),u.showModal()}function _(){if(u.returnValue==="default"){if(r===void 0||r===""){i("cancel");return}if(o!==null&&!o.test(r)){n(4,f=!0),u.showModal();return}i("ok",r)}else i("cancel")}function h(){r=this.value,n(3,r)}function m(C){le[C?"unshift":"push"](()=>{u=C,n(2,u)})}return s.$$set=C=>{"title"in C&&n(0,l=C.title),"message"in C&&n(1,t=C.message),"match"in C&&n(6,o=C.match)},[l,t,u,r,f,_,o,d,h,m]}class Ae extends q{constructor(e){super(),J(this,e,Re,Me,F,{title:0,message:1,match:6,open:7})}get open(){return this.$$.ctx[7]}}function ce(s,e,n){const l=s.slice();return l[15]=e[n],l[16]=e,l[17]=n,l}function fe(s){let e,n,l,t,o='<img src="/icons/del.svg" alt="delete" class="svelte-5u0uf6"/>',i,u;function r(){s[10].call(n,s[17])}function f(..._){return s[11](s[17],..._)}function d(){return s[12](s[17])}return{c(){e=E("li"),n=E("input"),l=S(),t=E("button"),t.innerHTML=o,this.h()},l(_){e=$(_,"LI",{class:!0});var h=N(e);n=$(h,"INPUT",{type:!0,class:!0}),l=V(h),t=$(h,"BUTTON",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-1vfw6ri"&&(t.innerHTML=o),h.forEach(w),this.h()},h(){y(n,"type","text"),y(n,"class","svelte-5u0uf6"),y(t,"class","prule__applications__removebutton svelte-5u0uf6"),y(e,"class","prule__applications__application svelte-5u0uf6")},m(_,h){B(_,e,h),k(e,n),X(n,s[0][s[17]]),k(e,l),k(e,t),i||(u=[O(n,"input",r),O(n,"input",f),O(t,"click",d)],i=!0)},p(_,h){s=_,h&1&&n.value!==s[0][s[17]]&&X(n,s[0][s[17]])},d(_){_&&w(e),i=!1,te(u)}}}function Ue(s){let e,n,l=!1,t,o,i,u,r,f,d,_='<img src="/icons/add.svg" alt="add" class="svelte-5u0uf6"/>',h,m,C,p=A(s[0]),P=[];for(let g=0;g<p.length;g+=1)P[g]=fe(ce(s,p,g));return h=Ce(s[9][0]),{c(){e=E("div"),n=E("input"),t=S(),o=E("h3"),i=Q(s[1]),u=S(),r=E("ul");for(let g=0;g<P.length;g+=1)P[g].c();f=S(),d=E("button"),d.innerHTML=_,this.h()},l(g){e=$(g,"DIV",{class:!0});var c=N(e);n=$(c,"INPUT",{class:!0,type:!0,name:!0}),t=V(c),o=$(c,"H3",{class:!0});var a=N(o);i=W(a,s[1]),a.forEach(w),u=V(c),r=$(c,"UL",{class:!0});var b=N(r);for(let v=0;v<P.length;v+=1)P[v].l(b);f=V(b),d=$(b,"BUTTON",{class:!0,"data-svelte-h":!0}),U(d)!=="svelte-1u4rdb6"&&(d.innerHTML=_),b.forEach(w),c.forEach(w),this.h()},h(){y(n,"class","prule__start svelte-5u0uf6"),y(n,"type","radio"),y(n,"name","ruleStart"),n.__value=s[1],X(n,n.__value),n.checked=s[2],y(o,"class","prule__name svelte-5u0uf6"),y(d,"class","prule__applications__addbutton svelte-5u0uf6"),y(r,"class","prule__applications svelte-5u0uf6"),y(e,"class","prule svelte-5u0uf6"),h.p(n)},m(g,c){B(g,e,c),k(e,n),n.checked=n.__value===s[3],k(e,t),k(e,o),k(o,i),k(e,u),k(e,r);for(let a=0;a<P.length;a+=1)P[a]&&P[a].m(r,null);k(r,f),k(r,d),m||(C=[O(n,"input",s[7]),O(n,"change",s[8]),O(d,"click",s[5])],m=!0)},p(g,[c]){if(c&2&&(n.__value=g[1],X(n,n.__value),l=!0),c&4&&(n.checked=g[2]),(l||c&8)&&(n.checked=n.__value===g[3]),c&2&&ee(i,g[1]),c&81){p=A(g[0]);let a;for(a=0;a<p.length;a+=1){const b=ce(g,p,a);P[a]?P[a].p(b,c):(P[a]=fe(b),P[a].c(),P[a].m(r,f))}for(;a<P.length;a+=1)P[a].d(1);P.length=p.length}},i:M,o:M,d(g){g&&w(e),se(P,g),h.r(),m=!1,te(C)}}}function He(s,e,n){let{name:l}=e,{rules:t=[""]}=e,{checked:o=!1}=e;t.length===0&&(t=[""]);const i={position:0,rule:null};Ee(()=>{i.rule!==null&&(i.rule.focus(),i.rule.setSelectionRange(i.position,i.position)),i.rule=null});const u=ne();function r(c,a){if(c==null)return;const b=c,v=b.selectionStart;n(0,t[a]=b.value.replace(/epsilon/g,"ε"),t),v!==null&&t[a]!==b.value&&(console.log("cursor pos",v),i.position=v-6,i.rule=b),u("input",t)}function f(){n(0,t=[...t,""]),u("input",t)}function d(c){t.length===1?n(0,t=[""]):n(0,t=t.filter((a,b)=>b!==c)),u("input",t)}let _="";function h(){console.log(_),(_===l||_==="")&&u("startChange",l)}const m=[[]];function C(){_=this.__value,n(3,_)}function p(c){t[c]=this.value,n(0,t)}const P=(c,a)=>r(a.target,c),g=c=>d(c);return s.$$set=c=>{"name"in c&&n(1,l=c.name),"rules"in c&&n(0,t=c.rules),"checked"in c&&n(2,o=c.checked)},[t,l,o,_,r,f,d,h,C,m,p,P,g]}class Le extends q{constructor(e){super(),J(this,e,He,Ue,F,{name:1,rules:0,checked:2})}}function je(s,e){const n=[];return e.forEach(l=>{const t=[];l.split("").forEach((o,i)=>{s.productions.has(o)?t.push({letter:o,index:i}):o=="ε"?t.push(null):t.push(o)}),n.push(t)}),n}function ze(s,e){s.productions.forEach(n=>{n.forEach(l=>{l.forEach((t,o)=>{typeof t=="string"&&t==e&&(l[o]={letter:e,index:o})})})})}function Ge(){const{subscribe:s,set:e,update:n}=Be({productions:new Map,start:""});return{subscribe:s,set:e,update:n,reset:()=>e({productions:new Map,start:""}),addVariable:l=>n(t=>(t.productions.set(l,[]),t)),removeVariable:l=>n(t=>(t.productions.delete(l),t)),setProduction:(l,t)=>n(o=>(o.productions.set(l,je(o,t)),ze(o,l),o)),setStart:l=>n(t=>(t.start=l,t))}}const K=Ge();function _e(s){return s.map(e=>e===null?"ε":typeof e=="string"?e:e.letter).join("")}function de(s,e,n){const l=s.slice();return l[7]=e[n][0],l[8]=e[n][1],l}function he(s){var t;let e,n;function l(...o){return s[2](s[7],...o)}return e=new Le({props:{name:s[7],rules:(t=s[1].productions.get(s[7]))==null?void 0:t.map(_e)}}),e.$on("input",l),e.$on("startChange",s[3]),{c(){L(e.$$.fragment)},l(o){j(e.$$.fragment,o)},m(o,i){z(e,o,i),n=!0},p(o,i){var r;s=o;const u={};i&2&&(u.name=s[7]),i&2&&(u.rules=(r=s[1].productions.get(s[7]))==null?void 0:r.map(_e)),e.$set(u)},i(o){n||(T(e.$$.fragment,o),n=!0)},o(o){I(e.$$.fragment,o),n=!1},d(o){G(e,o)}}}function Fe(s){let e,n,l="Production rules",t,o,i,u,r="Add production rule",f,d,_,h,m,C=A(s[1].productions),p=[];for(let c=0;c<C.length;c+=1)p[c]=he(de(s,C,c));const P=c=>I(p[c],1,1,()=>{p[c]=null});let g={title:"Add production rule",message:"Enter the name of the new production rule",match:/^[a-zA-Z]$/};return d=new Ae({props:g}),s[5](d),d.$on("ok",s[6]),{c(){e=E("nav"),n=E("h2"),n.textContent=l,t=S(),o=E("div");for(let c=0;c<p.length;c+=1)p[c].c();i=S(),u=E("button"),u.textContent=r,f=S(),L(d.$$.fragment),this.h()},l(c){e=$(c,"NAV",{class:!0});var a=N(e);n=$(a,"H2",{"data-svelte-h":!0}),U(n)!=="svelte-954e72"&&(n.textContent=l),t=V(a),o=$(a,"DIV",{class:!0});var b=N(o);for(let v=0;v<p.length;v+=1)p[v].l(b);b.forEach(w),i=V(a),u=$(a,"BUTTON",{class:!0,"data-svelte-h":!0}),U(u)!=="svelte-k27w2u"&&(u.textContent=r),f=V(a),j(d.$$.fragment,a),a.forEach(w),this.h()},h(){y(o,"class","productionRules__container svelte-1wcbdvv"),y(u,"class","productionRules__addButton svelte-1wcbdvv"),y(e,"class","productionRules")},m(c,a){B(c,e,a),k(e,n),k(e,t),k(e,o);for(let b=0;b<p.length;b+=1)p[b]&&p[b].m(o,null);k(e,i),k(e,u),k(e,f),z(d,e,null),_=!0,h||(m=O(u,"click",s[4]),h=!0)},p(c,[a]){if(a&2){C=A(c[1].productions);let v;for(v=0;v<C.length;v+=1){const D=de(c,C,v);p[v]?(p[v].p(D,a),T(p[v],1)):(p[v]=he(D),p[v].c(),T(p[v],1),p[v].m(o,null))}for(Y(),v=C.length;v<p.length;v+=1)P(v);x()}const b={};d.$set(b)},i(c){if(!_){for(let a=0;a<C.length;a+=1)T(p[a]);T(d.$$.fragment,c),_=!0}},o(c){p=p.filter(Boolean);for(let a=0;a<p.length;a+=1)I(p[a]);I(d.$$.fragment,c),_=!1},d(c){c&&w(e),se(p,c),s[5](null),G(d),h=!1,m()}}}function qe(s,e,n){let l;ie(s,K,d=>n(1,l=d));let t;const o=(d,_)=>K.setProduction(d,_.detail),i=d=>K.setStart(d.detail),u=()=>t.open();function r(d){le[d?"unshift":"push"](()=>{t=d,n(0,t)})}return[t,l,o,i,u,r,d=>K.setProduction(d.detail,[""])]}class Je extends q{constructor(e){super(),J(this,e,qe,Fe,F,{})}}function Ze(s){let e,n=s[0].letter+"",l,t,o;return{c(){e=E("span"),l=Q(n),this.h()},l(i){e=$(i,"SPAN",{class:!0,tabindex:!0,role:!0});var u=N(e);l=W(u,n),u.forEach(w),this.h()},h(){y(e,"class","nonterminal svelte-1gobc4g"),y(e,"tabindex","-1"),y(e,"role","button")},m(i,u){B(i,e,u),k(e,l),t||(o=[O(e,"keypress",s[3]),O(e,"click",function(){$e(s[1](s[0]))&&s[1](s[0]).apply(this,arguments)})],t=!0)},p(i,u){s=i,u&1&&n!==(n=s[0].letter+"")&&ee(l,n)},d(i){i&&w(e),t=!1,te(o)}}}function Ke(s){let e,n;return{c(){e=E("span"),n=Q(s[0]),this.h()},l(l){e=$(l,"SPAN",{class:!0});var t=N(e);n=W(t,s[0]),t.forEach(w),this.h()},h(){y(e,"class","terminal")},m(l,t){B(l,e,t),k(e,n)},p(l,t){t&1&&ee(n,l[0])},d(l){l&&w(e)}}}function Qe(s){let e,n="ε";return{c(){e=E("span"),e.textContent=n,this.h()},l(l){e=$(l,"SPAN",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1rb8g4u"&&(e.textContent=n),this.h()},h(){y(e,"class","terminal")},m(l,t){B(l,e,t)},p:M,d(l){l&&w(e)}}}function We(s){let e;function n(o,i){return o[0]===null?Qe:typeof o[0]=="string"?Ke:Ze}let l=n(s),t=l(s);return{c(){t.c(),e=oe()},l(o){t.l(o),e=oe()},m(o,i){t.m(o,i),B(o,e,i)},p(o,[i]){l===(l=n(o))&&t?t.p(o,i):(t.d(1),t=l(o),t&&(t.c(),t.m(e.parentNode,e)))},i:M,o:M,d(o){o&&w(e),t.d(o)}}}function Xe(s,e,n){let{symbol:l=null}=e,t=ne();function o(r){t("nonterminal",r)}function i(r,f){r.key==="Enter"&&t("nonterminal",f)}const u=r=>i(r,l);return s.$$set=r=>{"symbol"in r&&n(0,l=r.symbol)},[l,o,i,u]}let we=class extends q{constructor(e){super(),J(this,e,Xe,We,F,{symbol:0})}};function pe(s,e,n){const l=s.slice();return l[7]=e[n],l}function me(s){let e,n;return e=new we({props:{symbol:s[7]}}),e.$on("nonterminal",s[4]),{c(){L(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,t){z(e,l,t),n=!0},p(l,t){const o={};t&1&&(o.symbol=l[7]),e.$set(o)},i(l){n||(T(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){G(e,l)}}}function Ye(s){let e,n,l=A(s[0]),t=[];for(let i=0;i<l.length;i+=1)t[i]=me(pe(s,l,i));const o=i=>I(t[i],1,1,()=>{t[i]=null});return{c(){e=E("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=$(i,"DIV",{class:!0});var u=N(e);for(let r=0;r<t.length;r+=1)t[r].l(u);u.forEach(w),this.h()},h(){y(e,"class","rule_display")},m(i,u){B(i,e,u);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null);s[5](e),n=!0},p(i,[u]){if(u&5){l=A(i[0]);let r;for(r=0;r<l.length;r+=1){const f=pe(i,l,r);t[r]?(t[r].p(f,u),T(t[r],1)):(t[r]=me(f),t[r].c(),T(t[r],1),t[r].m(e,null))}for(Y(),r=l.length;r<t.length;r+=1)o(r);x()}},i(i){if(!n){for(let u=0;u<l.length;u+=1)T(t[u]);n=!0}},o(i){t=t.filter(Boolean);for(let u=0;u<t.length;u+=1)I(t[u]);n=!1},d(i){i&&w(e),se(t,i),s[5](null)}}}function xe(s,e,n){let l;ie(s,K,d=>n(3,l=d));let{state:t=[]}=e,{node:o}=e,i=ne();function u(d){i("nonterminal",d)}const r=d=>u(d.detail);function f(d){le[d?"unshift":"push"](()=>{o=d,n(1,o)})}return s.$$set=d=>{"state"in d&&n(0,t=d.state),"node"in d&&n(1,o=d.node)},s.$$.update=()=>{s.$$.dirty&8&&(l.start===""?n(0,t=[]):n(0,t=[{letter:l.start,index:0}]))},[t,o,u,l,r,f]}class et extends q{constructor(e){super(),J(this,e,xe,Ye,F,{state:0,node:1})}}function tt(s){let e,n,l,t,o;const i=s[3].default,u=Pe(i,s,s[2],null);return{c(){e=S(),n=E("div"),u&&u.c()},l(r){e=V(r),n=$(r,"DIV",{});var f=N(n);u&&u.l(f),f.forEach(w)},m(r,f){B(r,e,f),B(r,n,f),u&&u.m(n,null),s[4](n),l=!0,t||(o=O(document,"click",s[1]),t=!0)},p(r,[f]){u&&u.p&&(!l||f&4)&&Te(u,i,r,r[2],l?Ie(i,r[2],f,null):Ne(r[2]),null)},i(r){l||(T(u,r),l=!0)},o(r){I(u,r),l=!1},d(r){r&&(w(e),w(n)),u&&u.d(r),s[4](null),t=!1,o()}}}function nt(s,e,n){let{$$slots:l={},$$scope:t}=e,o=null,i=ne();function u(f){o&&!o.contains(f.target)&&i("clickOutside",f.target)}function r(f){le[f?"unshift":"push"](()=>{o=f,n(0,o)})}return s.$$set=f=>{"$$scope"in f&&n(2,t=f.$$scope)},[o,u,t,l,r]}class lt extends q{constructor(e){super(),J(this,e,nt,tt,F,{})}}function ge(s,e,n){const l=s.slice();return l[16]=e[n],l}function ve(s,e,n){const l=s.slice();return l[19]=e[n],l}function st(s){let e,n,l,t,o;e=new lt({props:{$$slots:{default:[ot]},$$scope:{ctx:s}}}),e.$on("clickOutside",s[12]);function i(r){s[13](r)}let u={state:s[1]};return s[3]!==void 0&&(u.node=s[3]),l=new et({props:u}),le.push(()=>Ve(l,"node",i)),l.$on("nonterminal",s[14]),{c(){L(e.$$.fragment),n=S(),L(l.$$.fragment)},l(r){j(e.$$.fragment,r),n=V(r),j(l.$$.fragment,r)},m(r,f){z(e,r,f),B(r,n,f),z(l,r,f),o=!0},p(r,f){const d={};f&4194324&&(d.$$scope={dirty:f,ctx:r}),e.$set(d);const _={};f&2&&(_.state=r[1]),!t&&f&8&&(t=!0,_.node=r[3],Se(()=>t=!1)),l.$set(_)},i(r){o||(T(e.$$.fragment,r),T(l.$$.fragment,r),o=!0)},o(r){I(e.$$.fragment,r),I(l.$$.fragment,r),o=!1},d(r){r&&w(n),G(e,r),G(l,r)}}}function rt(s){let e;return{c(){e=Q("No start symbol")},l(n){e=W(n,"No start symbol")},m(n,l){B(n,e,l)},p:M,i:M,o:M,d(n){n&&w(e)}}}function be(s){let e,n,l=A(s[2]),t=[];for(let i=0;i<l.length;i+=1)t[i]=ye(ge(s,l,i));const o=i=>I(t[i],1,1,()=>{t[i]=null});return{c(){e=E("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=$(i,"DIV",{class:!0});var u=N(e);for(let r=0;r<t.length;r+=1)t[r].l(u);u.forEach(w),this.h()},h(){y(e,"class","possibilities svelte-1ydlyeg")},m(i,u){B(i,e,u);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null);n=!0},p(i,u){if(u&388){l=A(i[2]);let r;for(r=0;r<l.length;r+=1){const f=ge(i,l,r);t[r]?(t[r].p(f,u),T(t[r],1)):(t[r]=ye(f),t[r].c(),T(t[r],1),t[r].m(e,null))}for(Y(),r=l.length;r<t.length;r+=1)o(r);x()}},i(i){if(!n){for(let u=0;u<l.length;u+=1)T(t[u]);n=!0}},o(i){t=t.filter(Boolean);for(let u=0;u<t.length;u+=1)I(t[u]);n=!1},d(i){i&&w(e),se(t,i)}}}function ke(s){let e,n;return e=new we({props:{symbol:s[19]}}),{c(){L(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,t){z(e,l,t),n=!0},p(l,t){const o={};t&4&&(o.symbol=l[19]),e.$set(o)},i(l){n||(T(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){G(e,l)}}}function ye(s){let e,n,l,t,o,i=A(s[16].rule),u=[];for(let _=0;_<i.length;_+=1)u[_]=ke(ve(s,i,_));const r=_=>I(u[_],1,1,()=>{u[_]=null});function f(){return s[10](s[16])}function d(..._){return s[11](s[16],..._)}return{c(){e=E("div");for(let _=0;_<u.length;_+=1)u[_].c();n=S(),this.h()},l(_){e=$(_,"DIV",{class:!0,tabindex:!0,role:!0});var h=N(e);for(let m=0;m<u.length;m+=1)u[m].l(h);n=V(h),h.forEach(w),this.h()},h(){y(e,"class","possibility svelte-1ydlyeg"),y(e,"tabindex","-1"),y(e,"role","button")},m(_,h){B(_,e,h);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(e,null);k(e,n),l=!0,t||(o=[O(e,"click",f),O(e,"keypress",d)],t=!0)},p(_,h){if(s=_,h&4){i=A(s[16].rule);let m;for(m=0;m<i.length;m+=1){const C=ve(s,i,m);u[m]?(u[m].p(C,h),T(u[m],1)):(u[m]=ke(C),u[m].c(),T(u[m],1),u[m].m(e,n))}for(Y(),m=i.length;m<u.length;m+=1)r(m);x()}},i(_){if(!l){for(let h=0;h<i.length;h+=1)T(u[h]);l=!0}},o(_){u=u.filter(Boolean);for(let h=0;h<u.length;h+=1)I(u[h]);l=!1},d(_){_&&w(e),se(u,_),t=!1,te(o)}}}function ot(s){let e,n,l=s[4]&&be(s);return{c(){l&&l.c(),e=oe()},l(t){l&&l.l(t),e=oe()},m(t,o){l&&l.m(t,o),B(t,e,o),n=!0},p(t,o){t[4]?l?(l.p(t,o),o&16&&T(l,1)):(l=be(t),l.c(),T(l,1),l.m(e.parentNode,e)):l&&(Y(),I(l,1,1,()=>{l=null}),x())},i(t){n||(T(l),n=!0)},o(t){I(l),n=!1},d(t){t&&w(e),l&&l.d(t)}}}function it(s){let e,n,l,t,o,i,u,r,f,d="Reset",_,h,m;const C=[rt,st],p=[];function P(g,c){return g[0].start===""?0:1}return o=P(s),i=p[o]=C[o](s),{c(){e=E("div"),n=E("div"),l=S(),t=E("div"),i.c(),u=S(),r=E("nav"),f=E("button"),f.textContent=d,this.h()},l(g){e=$(g,"DIV",{class:!0});var c=N(e);n=$(c,"DIV",{class:!0}),N(n).forEach(w),l=V(c),t=$(c,"DIV",{class:!0});var a=N(t);i.l(a),a.forEach(w),u=V(c),r=$(c,"NAV",{class:!0});var b=N(r);f=$(b,"BUTTON",{class:!0,"data-svelte-h":!0}),U(f)!=="svelte-1t10h42"&&(f.textContent=d),b.forEach(w),c.forEach(w),this.h()},h(){y(n,"class","derivationTree"),y(t,"class","manipulator svelte-1ydlyeg"),y(f,"class","svelte-1ydlyeg"),y(r,"class","floating_nav svelte-1ydlyeg"),y(e,"class","manipulator_contener svelte-1ydlyeg")},m(g,c){B(g,e,c),k(e,n),k(e,l),k(e,t),p[o].m(t,null),k(e,u),k(e,r),k(r,f),_=!0,h||(m=O(f,"click",s[15]),h=!0)},p(g,[c]){let a=o;o=P(g),o===a?p[o].p(g,c):(Y(),I(p[a],1,1,()=>{p[a]=null}),x(),i=p[o],i?i.p(g,c):(i=p[o]=C[o](g),i.c()),T(i,1),i.m(t,null))},i(g){_||(T(i),_=!0)},o(g){I(i),_=!1},d(g){g&&w(e),p[o].d(),h=!1,m()}}}function ut(s,e,n){let l;ie(s,K,a=>n(0,l=a));let t=[],o=[],i;function u(){n(1,t=[{letter:l.start,index:0}])}let r=!1;function f(a){n(4,r=!0),n(2,o=l.productions.get(a.letter).map(b=>({index:a.index,rule:b})))}function d(a,b){a.repeat||a.key=="Enter"&&_(b)}function _(a){let b=t.slice(0,a.index);b=b.concat(a.rule.map(v=>v&&typeof v!="string"?{letter:v.letter,index:v.index+a.index}:v)),n(1,t=b.concat(t.slice(a.index+1).map(v=>v&&typeof v!="string"?{letter:v.letter,index:v.index+a.rule.length-1}:v))),n(4,r=!1)}function h(a){i&&i.contains(a)||n(4,r=!1)}const m=a=>_(a),C=(a,b)=>d(b,a),p=a=>h(a.detail);function P(a){i=a,n(3,i)}const g=a=>f(a.detail),c=()=>u();return s.$$.update=()=>{s.$$.dirty&1&&(l.start===""?n(1,t=[]):u())},[l,t,o,i,r,u,f,d,_,h,m,C,p,P,g,c]}class at extends q{constructor(e){super(),J(this,e,ut,it,F,{})}}function ct(s){let e,n,l,t;return e=new Je({}),l=new at({}),{c(){L(e.$$.fragment),n=S(),L(l.$$.fragment)},l(o){j(e.$$.fragment,o),n=V(o),j(l.$$.fragment,o)},m(o,i){z(e,o,i),B(o,n,i),z(l,o,i),t=!0},p:M,i(o){t||(T(e.$$.fragment,o),T(l.$$.fragment,o),t=!0)},o(o){I(e.$$.fragment,o),I(l.$$.fragment,o),t=!1},d(o){o&&w(n),G(e,o),G(l,o)}}}class mt extends q{constructor(e){super(),J(this,e,null,ct,F,{})}}export{mt as component,ht as universal};
