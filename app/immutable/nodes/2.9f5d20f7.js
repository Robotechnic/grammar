import{s as x,f as k,l as le,a as S,g as w,h as D,m as re,d as g,c as L,u as J,j as v,B as de,i as I,y as b,C as he,D as V,n as ce,z as H,E as se,F as pe,p as X,G as Ge,H as me,b as Ke,I as Fe,A as ge,J as Ve,e as Y,K as Ze,r as Qe,v as Xe,w as Ye,x as xe,t as et,L as ke}from"../chunks/scheduler.d3332e72.js";import{S as ee,i as te,b as q,d as G,m as K,a as R,g as oe,c as ie,t as $,e as F,f as je}from"../chunks/index.aa7fdfed.js";import{w as we}from"../chunks/index.0a9752cd.js";const tt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Z(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}const nt=!0,lt=!1,Qt=Object.freeze(Object.defineProperty({__proto__:null,prerender:nt,ssr:lt},Symbol.toStringTag,{value:"Module"}));function rt(r){let e,l,t,n,a,o,i,s,u,f="Invalid input",c,d,p,C,T,_="Ok",y,N,m="Cancel",E,M;return{c(){e=k("dialog"),l=k("div"),t=k("h1"),n=le(r[0]),a=S(),o=k("p"),i=le(r[1]),s=S(),u=k("p"),u.textContent=f,c=S(),d=k("form"),p=k("input"),C=S(),T=k("button"),T.textContent=_,y=S(),N=k("button"),N.textContent=m,this.h()},l(O){e=w(O,"DIALOG",{class:!0});var B=D(e);l=w(B,"DIV",{class:!0});var z=D(l);t=w(z,"H1",{class:!0});var ae=D(t);n=re(ae,r[0]),ae.forEach(g),a=L(z),o=w(z,"P",{class:!0});var W=D(o);i=re(W,r[1]),W.forEach(g),s=L(z),u=w(z,"P",{class:!0,"data-svelte-h":!0}),J(u)!=="svelte-1fg550y"&&(u.textContent=f),c=L(z),d=w(z,"FORM",{method:!0,class:!0});var Q=D(d);p=w(Q,"INPUT",{class:!0,type:!0}),C=L(Q),T=w(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),J(T)!=="svelte-ehnyly"&&(T.textContent=_),y=L(Q),N=w(Q,"BUTTON",{class:!0,"data-svelte-h":!0}),J(N)!=="svelte-1nfr5kn"&&(N.textContent=m),Q.forEach(g),z.forEach(g),B.forEach(g),this.h()},h(){v(t,"class","svelte-n1w0m1"),v(o,"class","svelte-n1w0m1"),v(u,"class","errorMessage svelte-n1w0m1"),de(u,"show",r[4]),v(p,"class","input svelte-n1w0m1"),v(p,"type","text"),de(p,"errored",r[4]),v(T,"class","ok svelte-n1w0m1"),T.value="default",v(N,"class","cancel svelte-n1w0m1"),N.value="cancel",v(d,"method","dialog"),v(d,"class","svelte-n1w0m1"),v(l,"class","dialog svelte-n1w0m1"),v(e,"class","svelte-n1w0m1")},m(O,B){I(O,e,B),b(e,l),b(l,t),b(t,n),b(l,a),b(l,o),b(o,i),b(l,s),b(l,u),b(l,c),b(l,d),b(d,p),he(p,r[3]),b(d,C),b(d,T),b(d,y),b(d,N),r[9](e),E||(M=[V(p,"input",r[8]),V(e,"close",r[5])],E=!0)},p(O,[B]){B&1&&ce(n,O[0]),B&2&&ce(i,O[1]),B&16&&de(u,"show",O[4]),B&8&&p.value!==O[3]&&he(p,O[3]),B&16&&de(p,"errored",O[4])},i:H,o:H,d(O){O&&g(e),r[9](null),E=!1,se(M)}}}function st(r,e,l){let{title:t}=e,{message:n}=e,{match:a=null}=e;const o=pe();let i,s,u=!1;function f(){l(3,s=""),l(4,u=!1),i.showModal()}function c(){if(i.returnValue==="default"){if(s===void 0||s===""){o("cancel");return}if(a!==null&&!a.test(s)){l(4,u=!0),i.showModal();return}o("ok",s)}else o("cancel")}function d(){s=this.value,l(3,s)}function p(C){X[C?"unshift":"push"](()=>{i=C,l(2,i)})}return r.$$set=C=>{"title"in C&&l(0,t=C.title),"message"in C&&l(1,n=C.message),"match"in C&&l(6,a=C.match)},[t,n,i,s,u,c,a,f,d,p]}class Ae extends ee{constructor(e){super(),te(this,e,st,rt,x,{title:0,message:1,match:6,open:7})}get open(){return this.$$.ctx[7]}}const ot=""+new URL("../assets/add.377faa19.svg",import.meta.url).href,it=""+new URL("../assets/del.16504b92.svg",import.meta.url).href;function Ee(r,e,l){const t=r.slice();return t[13]=e[l],t[14]=e,t[15]=l,t}function Ce(r){let e,l,t,n,a=`<img src="${it}" alt="delete" class="svelte-5u0uf6"/>`,o,i;function s(){r[8].call(l,r[15])}function u(...c){return r[9](r[15],...c)}function f(){return r[10](r[15])}return{c(){e=k("li"),l=k("input"),t=S(),n=k("button"),n.innerHTML=a,this.h()},l(c){e=w(c,"LI",{class:!0});var d=D(e);l=w(d,"INPUT",{type:!0,class:!0}),t=L(d),n=w(d,"BUTTON",{class:!0,"data-svelte-h":!0}),J(n)!=="svelte-leavts"&&(n.innerHTML=a),d.forEach(g),this.h()},h(){v(l,"type","text"),v(l,"class","svelte-5u0uf6"),v(n,"class","prule__applications__removebutton svelte-5u0uf6"),v(e,"class","prule__applications__application svelte-5u0uf6")},m(c,d){I(c,e,d),b(e,l),he(l,r[0][r[15]]),b(e,t),b(e,n),o||(i=[V(l,"input",s),V(l,"input",u),V(n,"click",f)],o=!0)},p(c,d){r=c,d&1&&l.value!==r[0][r[15]]&&he(l,r[0][r[15]])},d(c){c&&g(e),o=!1,se(i)}}}function at(r){let e,l,t=!1,n,a,o,i,s,u,f,c=`<img src="${ot}" alt="add" class="svelte-5u0uf6"/>`,d,p,C,T=Z(r[0]),_=[];for(let y=0;y<T.length;y+=1)_[y]=Ce(Ee(r,T,y));return d=Ge(r[7][0]),{c(){e=k("div"),l=k("input"),n=S(),a=k("h3"),o=le(r[2]),i=S(),s=k("ul");for(let y=0;y<_.length;y+=1)_[y].c();u=S(),f=k("button"),f.innerHTML=c,this.h()},l(y){e=w(y,"DIV",{class:!0});var N=D(e);l=w(N,"INPUT",{class:!0,type:!0,name:!0}),n=L(N),a=w(N,"H3",{class:!0});var m=D(a);o=re(m,r[2]),m.forEach(g),i=L(N),s=w(N,"UL",{class:!0});var E=D(s);for(let M=0;M<_.length;M+=1)_[M].l(E);u=L(E),f=w(E,"BUTTON",{class:!0,"data-svelte-h":!0}),J(f)!=="svelte-2vjw9w"&&(f.innerHTML=c),E.forEach(g),N.forEach(g),this.h()},h(){v(l,"class","prule__start svelte-5u0uf6"),v(l,"type","radio"),v(l,"name","ruleStart"),l.__value=r[2],he(l,l.__value),v(a,"class","prule__name svelte-5u0uf6"),v(f,"class","prule__applications__addbutton svelte-5u0uf6"),v(s,"class","prule__applications svelte-5u0uf6"),v(e,"class","prule svelte-5u0uf6"),d.p(l)},m(y,N){I(y,e,N),b(e,l),l.checked=l.__value===r[1],b(e,n),b(e,a),b(a,o),b(e,i),b(e,s);for(let m=0;m<_.length;m+=1)_[m]&&_[m].m(s,null);b(s,u),b(s,f),p||(C=[V(l,"change",r[6]),V(f,"click",r[4])],p=!0)},p(y,[N]){if(N&4&&(l.__value=y[2],he(l,l.__value),t=!0),(t||N&2)&&(l.checked=l.__value===y[1]),N&4&&ce(o,y[2]),N&41){T=Z(y[0]);let m;for(m=0;m<T.length;m+=1){const E=Ee(y,T,m);_[m]?_[m].p(E,N):(_[m]=Ce(E),_[m].c(),_[m].m(s,u))}for(;m<_.length;m+=1)_[m].d(1);_.length=T.length}},i:H,o:H,d(y){y&&g(e),me(_,y),d.r(),p=!1,se(C)}}}function ut(r,e,l){let{name:t}=e,{rules:n=[""]}=e,{group:a=""}=e;n.length===0&&(n=[""]);const o={position:0,rule:null};Ke(()=>{o.rule!==null&&(o.rule.focus(),o.rule.setSelectionRange(o.position,o.position)),o.rule=null});const i=pe();function s(_,y){if(_==null)return;const N=_,m=N.selectionStart;l(0,n[y]=N.value.replace(/epsilon/g,"ε"),n),m!==null&&n[y]!==N.value&&(console.log("cursor pos",m),o.position=m-6,o.rule=N),i("input",n)}function u(){l(0,n=[...n,""]),i("input",n)}function f(_){n.length===1?l(0,n=[""]):l(0,n=n.filter((y,N)=>N!==_)),i("input",n)}const c=[[]];function d(){a=this.__value,l(1,a)}function p(_){n[_]=this.value,l(0,n)}const C=(_,y)=>s(y.target,_),T=_=>f(_);return r.$$set=_=>{"name"in _&&l(2,t=_.name),"rules"in _&&l(0,n=_.rules),"group"in _&&l(1,a=_.group)},[n,a,t,s,u,f,d,c,p,C,T]}class ct extends ee{constructor(e){super(),te(this,e,ut,at,x,{name:2,rules:0,group:1})}}function ft(r,e){const l=[];return e.forEach(t=>{const n=[];t.split("").forEach((a,o)=>{r.productions.has(a)?n.push({letter:a,index:o}):a=="ε"?n.push(null):n.push(a)}),l.push(n)}),l}function dt(r,e){r.productions.forEach(l=>{l.forEach(t=>{t.forEach((n,a)=>{typeof n=="string"&&n==e&&(t[a]={letter:e,index:a})})})})}function _t(){const{subscribe:r,set:e,update:l}=we({productions:new Map,start:""});return{subscribe:r,set:e,update:l,reset:()=>e({productions:new Map,start:""}),addVariable:t=>l(n=>(n.productions.set(t,[]),n)),removeVariable:t=>l(n=>(n.productions.delete(t),n)),setProduction:(t,n)=>l(a=>(a.productions.set(t,ft(a,n)),dt(a,t),a)),setStart:t=>l(n=>(n.start=t,n)),toJSON:()=>{const t=Fe(ne);return{productions:Object.fromEntries(t.productions),start:t.start}},fromJSON:t=>{const n=t;if(!n.productions||!n.start)throw new Error("Invalid grammar: missing fields");if(n.productions=new Map(Object.entries(n.productions)),n.productions.size==0||n.start=="")throw new Error("Invalid grammar: empty fields");if(!n.productions.has(n.start))throw new Error("Invalid grammar: no start symbol");for(const[a,o]of n.productions){if(a.length!=1)throw new Error("Invalid grammar: invalid variable");for(const i of o)for(const[s,u]of i.entries())if(u!==null){if(typeof u=="string"&&u.length!=1)throw new Error("Invalid grammar: invalid terminal");if(typeof u!="string"){if(!n.productions.has(u.letter))throw new Error("Invalid grammar: invalid variable");if(u.index!=s)throw new Error("Invalid grammar: invalid variable index")}}}e(n)}}}const ne=_t();function Te(r){return r.map(e=>e===null?"ε":typeof e=="string"?e:e.letter).join("")}function Ne(r,e,l){const t=r.slice();return t[7]=e[l][0],t[8]=e[l][1],t}function Oe(r){var i;let e,l,t;function n(s){r[2](s)}function a(...s){return r[3](r[7],...s)}let o={name:r[7],rules:(i=r[1].productions.get(r[7]))==null?void 0:i.map(Te)};return r[1].start!==void 0&&(o.group=r[1].start),e=new ct({props:o}),X.push(()=>je(e,"group",n)),e.$on("input",a),{c(){q(e.$$.fragment)},l(s){G(e.$$.fragment,s)},m(s,u){K(e,s,u),t=!0},p(s,u){var c;r=s;const f={};u&2&&(f.name=r[7]),u&2&&(f.rules=(c=r[1].productions.get(r[7]))==null?void 0:c.map(Te)),!l&&u&2&&(l=!0,f.group=r[1].start,Ve(()=>l=!1)),e.$set(f)},i(s){t||(R(e.$$.fragment,s),t=!0)},o(s){$(e.$$.fragment,s),t=!1},d(s){F(e,s)}}}function ht(r){let e,l,t="<h2>Production rules</h2>",n,a,o,i,s,u="Add production rule",f,c,d,p,C,T=Z(r[1].productions),_=[];for(let m=0;m<T.length;m+=1)_[m]=Oe(Ne(r,T,m));const y=m=>$(_[m],1,1,()=>{_[m]=null});let N={title:"Add production rule",message:"Enter the name of the new production rule",match:/^[a-zA-Z]$/};return c=new Ae({props:N}),r[5](c),c.$on("ok",r[6]),{c(){e=k("nav"),l=k("div"),l.innerHTML=t,n=S(),a=k("div");for(let m=0;m<_.length;m+=1)_[m].c();o=S(),i=k("div"),s=k("button"),s.textContent=u,f=S(),q(c.$$.fragment),this.h()},l(m){e=w(m,"NAV",{class:!0});var E=D(e);l=w(E,"DIV",{class:!0,"data-svelte-h":!0}),J(l)!=="svelte-irhesm"&&(l.innerHTML=t),n=L(E),a=w(E,"DIV",{class:!0});var M=D(a);for(let B=0;B<_.length;B+=1)_[B].l(M);M.forEach(g),o=L(E),i=w(E,"DIV",{class:!0});var O=D(i);s=w(O,"BUTTON",{class:!0,"data-svelte-h":!0}),J(s)!=="svelte-1knfucn"&&(s.textContent=u),O.forEach(g),f=L(E),G(c.$$.fragment,E),E.forEach(g),this.h()},h(){v(l,"class","productionRules__top svelte-15dbb21"),v(a,"class","productionRules__container svelte-15dbb21"),v(s,"class","productionRules__bottom__addButton svelte-15dbb21"),v(i,"class","productionRules__bottom svelte-15dbb21"),v(e,"class","productionRules svelte-15dbb21")},m(m,E){I(m,e,E),b(e,l),b(e,n),b(e,a);for(let M=0;M<_.length;M+=1)_[M]&&_[M].m(a,null);b(e,o),b(e,i),b(i,s),b(e,f),K(c,e,null),d=!0,p||(C=V(s,"click",r[4]),p=!0)},p(m,[E]){if(E&2){T=Z(m[1].productions);let O;for(O=0;O<T.length;O+=1){const B=Ne(m,T,O);_[O]?(_[O].p(B,E),R(_[O],1)):(_[O]=Oe(B),_[O].c(),R(_[O],1),_[O].m(a,null))}for(oe(),O=T.length;O<_.length;O+=1)y(O);ie()}const M={};c.$set(M)},i(m){if(!d){for(let E=0;E<T.length;E+=1)R(_[E]);R(c.$$.fragment,m),d=!0}},o(m){_=_.filter(Boolean);for(let E=0;E<_.length;E+=1)$(_[E]);$(c.$$.fragment,m),d=!1},d(m){m&&g(e),me(_,m),r[5](null),F(c),p=!1,C()}}}function pt(r,e,l){let t;ge(r,ne,f=>l(1,t=f));let n;function a(f){r.$$.not_equal(t.start,f)&&(t.start=f,ne.set(t))}const o=(f,c)=>ne.setProduction(f,c.detail),i=()=>n.open();function s(f){X[f?"unshift":"push"](()=>{n=f,l(0,n)})}return[n,t,a,o,i,s,f=>ne.setProduction(f.detail,[""])]}class mt extends ee{constructor(e){super(),te(this,e,pt,ht,x,{})}}function gt(r){let e,l=r[0].letter+"",t,n,a;return{c(){e=k("span"),t=le(l),this.h()},l(o){e=w(o,"SPAN",{class:!0,tabindex:!0,role:!0});var i=D(e);t=re(i,l),i.forEach(g),this.h()},h(){v(e,"class","nonterminal svelte-1gobc4g"),v(e,"tabindex",r[1]),v(e,"role","button")},m(o,i){I(o,e,i),b(e,t),n||(a=[V(e,"keypress",r[4]),V(e,"click",function(){Ze(r[2](r[0]))&&r[2](r[0]).apply(this,arguments)})],n=!0)},p(o,i){r=o,i&1&&l!==(l=r[0].letter+"")&&ce(t,l),i&2&&v(e,"tabindex",r[1])},d(o){o&&g(e),n=!1,se(a)}}}function vt(r){let e;function l(a,o){return a[0]===" "?wt:kt}let t=l(r),n=t(r);return{c(){n.c(),e=Y()},l(a){n.l(a),e=Y()},m(a,o){n.m(a,o),I(a,e,o)},p(a,o){t===(t=l(a))&&n?n.p(a,o):(n.d(1),n=t(a),n&&(n.c(),n.m(e.parentNode,e)))},d(a){a&&g(e),n.d(a)}}}function bt(r){let e,l="ε";return{c(){e=k("span"),e.textContent=l,this.h()},l(t){e=w(t,"SPAN",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1rb8g4u"&&(e.textContent=l),this.h()},h(){v(e,"class","terminal")},m(t,n){I(t,e,n)},p:H,d(t){t&&g(e)}}}function kt(r){let e,l;return{c(){e=k("span"),l=le(r[0]),this.h()},l(t){e=w(t,"SPAN",{class:!0});var n=D(e);l=re(n,r[0]),n.forEach(g),this.h()},h(){v(e,"class","terminal")},m(t,n){I(t,e,n),b(e,l)},p(t,n){n&1&&ce(l,t[0])},d(t){t&&g(e)}}}function wt(r){let e,l="␣";return{c(){e=k("span"),e.textContent=l,this.h()},l(t){e=w(t,"SPAN",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-1lgi7go"&&(e.textContent=l),this.h()},h(){v(e,"class","terminal")},m(t,n){I(t,e,n)},p:H,d(t){t&&g(e)}}}function yt(r){let e;function l(a,o){return a[0]===null?bt:typeof a[0]=="string"?vt:gt}let t=l(r),n=t(r);return{c(){n.c(),e=Y()},l(a){n.l(a),e=Y()},m(a,o){n.m(a,o),I(a,e,o)},p(a,[o]){t===(t=l(a))&&n?n.p(a,o):(n.d(1),n=t(a),n&&(n.c(),n.m(e.parentNode,e)))},i:H,o:H,d(a){a&&g(e),n.d(a)}}}function Et(r,e,l){let{symbol:t=null}=e,{tabindex:n=-1}=e,a=pe();function o(u){a("nonterminal",u)}function i(u,f){u.key==="Enter"&&a("nonterminal",f)}const s=u=>i(u,t);return r.$$set=u=>{"symbol"in u&&l(0,t=u.symbol),"tabindex"in u&&l(1,n=u.tabindex)},[t,n,o,i,s]}let He=class extends ee{constructor(e){super(),te(this,e,Et,yt,x,{symbol:0,tabindex:1})}};function Pe(r,e,l){const t=r.slice();return t[9]=e[l],t}function Re(r){let e,l;return e=new He({props:{symbol:r[9],tabindex:r[2]}}),e.$on("nonterminal",r[6]),{c(){q(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,n){K(e,t,n),l=!0},p(t,n){const a={};n&1&&(a.symbol=t[9]),n&4&&(a.tabindex=t[2]),e.$set(a)},i(t){l||(R(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function Ct(r){let e,l,t=Z(r[0]),n=[];for(let o=0;o<t.length;o+=1)n[o]=Re(Pe(r,t,o));const a=o=>$(n[o],1,1,()=>{n[o]=null});return{c(){e=k("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=w(o,"DIV",{class:!0});var i=D(e);for(let s=0;s<n.length;s+=1)n[s].l(i);i.forEach(g),this.h()},h(){v(e,"class","rule_display svelte-1ybpif1"),de(e,"wrap",r[3])},m(o,i){I(o,e,i);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(e,null);r[7](e),l=!0},p(o,[i]){if(i&21){t=Z(o[0]);let s;for(s=0;s<t.length;s+=1){const u=Pe(o,t,s);n[s]?(n[s].p(u,i),R(n[s],1)):(n[s]=Re(u),n[s].c(),R(n[s],1),n[s].m(e,null))}for(oe(),s=t.length;s<n.length;s+=1)a(s);ie()}(!l||i&8)&&de(e,"wrap",o[3])},i(o){if(!l){for(let i=0;i<t.length;i+=1)R(n[i]);l=!0}},o(o){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)$(n[i]);l=!1},d(o){o&&g(e),me(n,o),r[7](null)}}}function Tt(r,e,l){let t;ge(r,ne,d=>l(5,t=d));let{rule:n=[]}=e,{tabindex:a}=e,{node:o=void 0}=e,{allowWrap:i=!1}=e,s=pe();function u(d){s("nonterminal",d)}const f=d=>u(d.detail);function c(d){X[d?"unshift":"push"](()=>{o=d,l(1,o)})}return r.$$set=d=>{"rule"in d&&l(0,n=d.rule),"tabindex"in d&&l(2,a=d.tabindex),"node"in d&&l(1,o=d.node),"allowWrap"in d&&l(3,i=d.allowWrap)},r.$$.update=()=>{r.$$.dirty&32&&(t.start===""?l(0,n=[]):l(0,n=[{letter:t.start,index:0}]))},[n,o,a,i,u,t,f,c]}class Je extends ee{constructor(e){super(),te(this,e,Tt,Ct,x,{rule:0,tabindex:2,node:1,allowWrap:3})}}function Nt(r){let e,l,t,n,a;const o=r[3].default,i=Qe(o,r,r[2],null);return{c(){e=S(),l=k("div"),i&&i.c()},l(s){e=L(s),l=w(s,"DIV",{});var u=D(l);i&&i.l(u),u.forEach(g)},m(s,u){I(s,e,u),I(s,l,u),i&&i.m(l,null),r[4](l),t=!0,n||(a=V(document,"click",r[1]),n=!0)},p(s,[u]){i&&i.p&&(!t||u&4)&&Xe(i,o,s,s[2],t?xe(o,s[2],u,null):Ye(s[2]),null)},i(s){t||(R(i,s),t=!0)},o(s){$(i,s),t=!1},d(s){s&&(g(e),g(l)),i&&i.d(s),r[4](null),n=!1,a()}}}function Ot(r,e,l){let{$$slots:t={},$$scope:n}=e,a=null,o=pe();function i(u){a&&!a.contains(u.target)&&o("clickOutside",u.target)}function s(u){X[u?"unshift":"push"](()=>{a=u,l(0,a)})}return r.$$set=u=>{"$$scope"in u&&l(2,n=u.$$scope)},[a,i,n,t,s]}class Pt extends ee{constructor(e){super(),te(this,e,Ot,Nt,x,{})}}const _e=we([]);function Rt(){const{subscribe:r,set:e,update:l}=we([]);return{subscribe:r,set:e,update:l,reset:()=>e([]),restore:t=>l(n=>(_e.set(n[t]),n.slice(0,t+1))),addRule:t=>l(n=>[...n,t]),removeRule:()=>l(t=>t.length<2?t:(_e.set(t[t.length-2]),t.slice(0,-1)))}}const ue=Rt();function It(r){let e,l,t,n,a,o,i,s,u,f="Ok",c,d;return{c(){e=k("dialog"),l=k("form"),t=k("h1"),n=le(r[0]),a=S(),o=k("p"),i=le(r[1]),s=S(),u=k("button"),u.textContent=f,this.h()},l(p){e=w(p,"DIALOG",{class:!0});var C=D(e);l=w(C,"FORM",{class:!0,method:!0});var T=D(l);t=w(T,"H1",{class:!0});var _=D(t);n=re(_,r[0]),_.forEach(g),a=L(T),o=w(T,"P",{});var y=D(o);i=re(y,r[1]),y.forEach(g),s=L(T),u=w(T,"BUTTON",{class:!0,"data-svelte-h":!0}),J(u)!=="svelte-ehnyly"&&(u.textContent=f),T.forEach(g),C.forEach(g),this.h()},h(){v(t,"class","svelte-1v8wgvi"),v(u,"class","ok svelte-1v8wgvi"),u.value="default",v(l,"class","dialog svelte-1v8wgvi"),v(l,"method","dialog"),v(e,"class","svelte-1v8wgvi")},m(p,C){I(p,e,C),b(e,l),b(l,t),b(t,n),b(l,a),b(l,o),b(o,i),b(l,s),b(l,u),r[5](e),c||(d=[V(l,"submit",r[3]),V(e,"close",r[3])],c=!0)},p(p,[C]){C&1&&ce(n,p[0]),C&2&&ce(i,p[1])},i:H,o:H,d(p){p&&g(e),r[5](null),c=!1,se(d)}}}function Mt(r,e,l){let{title:t}=e,{message:n}=e;const a=pe();let o;function i(){o.showModal()}function s(){a("ok")}function u(f){X[f?"unshift":"push"](()=>{o=f,l(2,o)})}return r.$$set=f=>{"title"in f&&l(0,t=f.title),"message"in f&&l(1,n=f.message)},[t,n,o,s,i,u]}class $t extends ee{constructor(e){super(),te(this,e,Mt,It,x,{title:0,message:1,open:4})}get open(){return this.$$.ctx[4]}}function Ie(r,e,l){const t=r.slice();return t[6]=e[l],t[8]=l,t}function Dt(r){let e,l,t=Z(r[1]),n=[];for(let o=0;o<t.length;o+=1)n[o]=$e(Ie(r,t,o));const a=o=>$(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=Y()},l(o){for(let i=0;i<n.length;i+=1)n[i].l(o);e=Y()},m(o,i){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(o,i);I(o,e,i),l=!0},p(o,i){if(i&6){t=Z(o[1]);let s;for(s=0;s<t.length;s+=1){const u=Ie(o,t,s);n[s]?(n[s].p(u,i),R(n[s],1)):(n[s]=$e(u),n[s].c(),R(n[s],1),n[s].m(e.parentNode,e))}for(oe(),s=t.length;s<n.length;s+=1)a(s);ie()}},i(o){if(!l){for(let i=0;i<t.length;i+=1)R(n[i]);l=!0}},o(o){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)$(n[i]);l=!1},d(o){o&&g(e),me(n,o)}}}function St(r){let e,l="Click on a non terminal symbol to start";return{c(){e=k("p"),e.textContent=l,this.h()},l(t){e=w(t,"P",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-2m14de"&&(e.textContent=l),this.h()},h(){v(e,"class","svelte-tkr9nq")},m(t,n){I(t,e,n)},p:H,i:H,o:H,d(t){t&&g(e)}}}function Me(r){let e,l='<svg width="30" height="30" viewBox="0 0 50 50" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 25H50" stroke="black" stroke-width="2"></path><path d="M40 15L50 25L40 35" stroke="black" stroke-width="2"></path></svg> ';return{c(){e=k("div"),e.innerHTML=l,this.h()},l(t){e=w(t,"DIV",{class:!0,"data-svelte-h":!0}),J(e)!=="svelte-14gk61i"&&(e.innerHTML=l),this.h()},h(){v(e,"class","arrow")},m(t,n){I(t,e,n)},d(t){t&&g(e)}}}function $e(r){let e,l,t,n,a,o,i;l=new Je({props:{rule:r[6],tabindex:-1}});function s(){return r[3](r[8])}function u(...c){return r[4](r[8],...c)}let f=r[8]!=r[1].length-1&&Me();return{c(){e=k("div"),q(l.$$.fragment),t=S(),f&&f.c(),n=Y(),this.h()},l(c){e=w(c,"DIV",{class:!0,role:!0,tabindex:!0});var d=D(e);G(l.$$.fragment,d),d.forEach(g),t=L(c),f&&f.l(c),n=Y(),this.h()},h(){v(e,"class","derivationTree__derivation svelte-tkr9nq"),v(e,"role","button"),v(e,"tabindex","0")},m(c,d){I(c,e,d),K(l,e,null),I(c,t,d),f&&f.m(c,d),I(c,n,d),a=!0,o||(i=[V(e,"click",s),V(e,"keypress",u)],o=!0)},p(c,d){r=c;const p={};d&2&&(p.rule=r[6]),l.$set(p),r[8]!=r[1].length-1?f||(f=Me(),f.c(),f.m(n.parentNode,n)):f&&(f.d(1),f=null)},i(c){a||(R(l.$$.fragment,c),a=!0)},o(c){$(l.$$.fragment,c),a=!1},d(c){c&&(g(e),g(t),g(n)),F(l),f&&f.d(c),o=!1,se(i)}}}function Lt(r){let e,l,t,n;const a=[St,Dt],o=[];function i(s,u){return s[1].length==0?0:1}return l=i(r),t=o[l]=a[l](r),{c(){e=k("nav"),t.c(),this.h()},l(s){e=w(s,"NAV",{class:!0});var u=D(e);t.l(u),u.forEach(g),this.h()},h(){v(e,"class","derivationTree svelte-tkr9nq")},m(s,u){I(s,e,u),o[l].m(e,null),r[5](e),n=!0},p(s,[u]){let f=l;l=i(s),l===f?o[l].p(s,u):(oe(),$(o[f],1,1,()=>{o[f]=null}),ie(),t=o[l],t?t.p(s,u):(t=o[l]=a[l](s),t.c()),R(t,1),t.m(e,null))},i(s){n||(R(t),n=!0)},o(s){$(t),n=!1},d(s){s&&g(e),o[l].d(),r[5](null)}}}function Bt(r,e,l){let t;ge(r,ue,u=>l(1,t=u));function n(u,f){u.key=="Enter"&&ue.restore(f)}let a=null;const o=u=>ue.restore(u),i=(u,f)=>n(f,u);function s(u){X[u?"unshift":"push"](()=>{a=u,l(0,a)})}return r.$$.update=()=>{r.$$.dirty&3&&et().then(()=>{a&&a.scrollTo({left:a.scrollWidth,behavior:"smooth"})})},[a,t,n,o,i,s]}class Ut extends ee{constructor(e){super(),te(this,e,Bt,Lt,x,{})}}const{document:Vt}=tt;function De(r,e,l){const t=r.slice();return t[28]=e[l],t}function Se(r,e,l){const t=r.slice();return t[31]=e[l],t}function jt(r){let e,l,t,n,a;e=new Pt({props:{$$slots:{default:[Ht]},$$scope:{ctx:r}}}),e.$on("clickOutside",r[18]);function o(s){r[19](s)}let i={rule:r[7],tabindex:0,allowWrap:!0};return r[2]!==void 0&&(i.node=r[2]),t=new Je({props:i}),X.push(()=>je(t,"node",o)),t.$on("nonterminal",r[20]),{c(){q(e.$$.fragment),l=S(),q(t.$$.fragment)},l(s){G(e.$$.fragment,s),l=L(s),G(t.$$.fragment,s)},m(s,u){K(e,s,u),I(s,l,u),K(t,s,u),a=!0},p(s,u){const f={};u[0]&66|u[1]&8&&(f.$$scope={dirty:u,ctx:s}),e.$set(f);const c={};u[0]&128&&(c.rule=s[7]),!n&&u[0]&4&&(n=!0,c.node=s[2],Ve(()=>n=!1)),t.$set(c)},i(s){a||(R(e.$$.fragment,s),R(t.$$.fragment,s),a=!0)},o(s){$(e.$$.fragment,s),$(t.$$.fragment,s),a=!1},d(s){s&&g(l),F(e,s),F(t,s)}}}function At(r){let e;return{c(){e=le("No start symbol")},l(l){e=re(l,"No start symbol")},m(l,t){I(l,e,t)},p:H,i:H,o:H,d(l){l&&g(e)}}}function Le(r){let e,l,t=Z(r[1]),n=[];for(let o=0;o<t.length;o+=1)n[o]=Ue(De(r,t,o));const a=o=>$(n[o],1,1,()=>{n[o]=null});return{c(){e=k("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=w(o,"DIV",{class:!0});var i=D(e);for(let s=0;s<n.length;s+=1)n[s].l(i);i.forEach(g),this.h()},h(){v(e,"class","possibilities svelte-1lvc58u")},m(o,i){I(o,e,i);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(e,null);l=!0},p(o,i){if(i[0]&3074){t=Z(o[1]);let s;for(s=0;s<t.length;s+=1){const u=De(o,t,s);n[s]?(n[s].p(u,i),R(n[s],1)):(n[s]=Ue(u),n[s].c(),R(n[s],1),n[s].m(e,null))}for(oe(),s=t.length;s<n.length;s+=1)a(s);ie()}},i(o){if(!l){for(let i=0;i<t.length;i+=1)R(n[i]);l=!0}},o(o){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)$(n[i]);l=!1},d(o){o&&g(e),me(n,o)}}}function Be(r){let e,l;return e=new He({props:{symbol:r[31]}}),{c(){q(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,n){K(e,t,n),l=!0},p(t,n){const a={};n[0]&2&&(a.symbol=t[31]),e.$set(a)},i(t){l||(R(e.$$.fragment,t),l=!0)},o(t){$(e.$$.fragment,t),l=!1},d(t){F(e,t)}}}function Ue(r){let e,l,t,n,a,o=Z(r[28].rule),i=[];for(let c=0;c<o.length;c+=1)i[c]=Be(Se(r,o,c));const s=c=>$(i[c],1,1,()=>{i[c]=null});function u(){return r[16](r[28])}function f(...c){return r[17](r[28],...c)}return{c(){e=k("div");for(let c=0;c<i.length;c+=1)i[c].c();l=S(),this.h()},l(c){e=w(c,"DIV",{class:!0,tabindex:!0,role:!0});var d=D(e);for(let p=0;p<i.length;p+=1)i[p].l(d);l=L(d),d.forEach(g),this.h()},h(){v(e,"class","possibility svelte-1lvc58u"),v(e,"tabindex","0"),v(e,"role","button")},m(c,d){I(c,e,d);for(let p=0;p<i.length;p+=1)i[p]&&i[p].m(e,null);b(e,l),t=!0,n||(a=[V(e,"click",u),V(e,"keypress",f)],n=!0)},p(c,d){if(r=c,d[0]&2){o=Z(r[28].rule);let p;for(p=0;p<o.length;p+=1){const C=Se(r,o,p);i[p]?(i[p].p(C,d),R(i[p],1)):(i[p]=Be(C),i[p].c(),R(i[p],1),i[p].m(e,l))}for(oe(),p=o.length;p<i.length;p+=1)s(p);ie()}},i(c){if(!t){for(let d=0;d<o.length;d+=1)R(i[d]);t=!0}},o(c){i=i.filter(Boolean);for(let d=0;d<i.length;d+=1)$(i[d]);t=!1},d(c){c&&g(e),me(i,c),n=!1,se(a)}}}function Ht(r){let e,l,t=r[6]&&Le(r);return{c(){t&&t.c(),e=Y()},l(n){t&&t.l(n),e=Y()},m(n,a){t&&t.m(n,a),I(n,e,a),l=!0},p(n,a){n[6]?t?(t.p(n,a),a[0]&64&&R(t,1)):(t=Le(n),t.c(),R(t,1),t.m(e.parentNode,e)):t&&(oe(),$(t,1,1,()=>{t=null}),ie())},i(n){l||(R(t),l=!0)},o(n){$(t),l=!1},d(n){n&&g(e),t&&t.d(n)}}}function Jt(r){let e,l,t,n,a,o,i,s,u,f,c="Reset",d,p,C="Save",T,_,y="Load",N,m,E,M,O,B,z;t=new Ut({});const ae=[At,jt],W=[];function Q(P,h){return P[0].start===""?0:1}o=Q(r),i=W[o]=ae[o](r);let ve={title:"Import Error",message:r[3]};m=new $t({props:ve}),r[24](m),m.$on("ok",r[25]);let be={title:"Grammar Name",message:"Enter the name of the grammar"};return M=new Ae({props:be}),r[26](M),M.$on("ok",r[27]),{c(){e=S(),l=k("div"),q(t.$$.fragment),n=S(),a=k("div"),i.c(),s=S(),u=k("nav"),f=k("button"),f.textContent=c,d=S(),p=k("button"),p.textContent=C,T=S(),_=k("button"),_.textContent=y,N=S(),q(m.$$.fragment),E=S(),q(M.$$.fragment),this.h()},l(P){e=L(P),l=w(P,"DIV",{class:!0});var h=D(l);G(t.$$.fragment,h),n=L(h),a=w(h,"DIV",{class:!0});var U=D(a);i.l(U),U.forEach(g),s=L(h),u=w(h,"NAV",{class:!0});var A=D(u);f=w(A,"BUTTON",{class:!0,"data-svelte-h":!0}),J(f)!=="svelte-rhidub"&&(f.textContent=c),d=L(A),p=w(A,"BUTTON",{class:!0,"data-svelte-h":!0}),J(p)!=="svelte-1bjhmza"&&(p.textContent=C),T=L(A),_=w(A,"BUTTON",{class:!0,"data-svelte-h":!0}),J(_)!=="svelte-ca8w"&&(_.textContent=y),A.forEach(g),h.forEach(g),N=L(P),G(m.$$.fragment,P),E=L(P),G(M.$$.fragment,P),this.h()},h(){v(a,"class","manipulator svelte-1lvc58u"),v(f,"class","svelte-1lvc58u"),v(p,"class","svelte-1lvc58u"),v(_,"class","svelte-1lvc58u"),v(u,"class","floating_nav svelte-1lvc58u"),v(l,"class","manipulator_contener svelte-1lvc58u")},m(P,h){I(P,e,h),I(P,l,h),K(t,l,null),b(l,n),b(l,a),W[o].m(a,null),b(l,s),b(l,u),b(u,f),b(u,d),b(u,p),b(u,T),b(u,_),I(P,N,h),K(m,P,h),I(P,E,h),K(M,P,h),O=!0,B||(z=[V(Vt.body,"keydown",r[15]),V(f,"click",r[21]),V(p,"click",r[22]),V(_,"click",r[23])],B=!0)},p(P,h){let U=o;o=Q(P),o===U?W[o].p(P,h):(oe(),$(W[U],1,1,()=>{W[U]=null}),ie(),i=W[o],i?i.p(P,h):(i=W[o]=ae[o](P),i.c()),R(i,1),i.m(a,null));const A={};h[0]&8&&(A.message=P[3]),m.$set(A);const j={};M.$set(j)},i(P){O||(R(t.$$.fragment,P),R(i),R(m.$$.fragment,P),R(M.$$.fragment,P),O=!0)},o(P){$(t.$$.fragment,P),$(i),$(m.$$.fragment,P),$(M.$$.fragment,P),O=!1},d(P){P&&(g(e),g(l),g(N),g(E)),F(t),W[o].d(),r[24](null),F(m,P),r[26](null),F(M,P),B=!1,se(z)}}}function zt(r,e,l){let t,n;ge(r,_e,h=>l(7,t=h)),ge(r,ne,h=>l(0,n=h));let a=[],o,i="",s,u;function f(){ke(_e,t=[{letter:n.start,index:0}],t),ue.reset(),ue.addRule(t)}let c=!1;function d(h){l(6,c=!0),l(1,a=n.productions.get(h.letter).map(U=>({index:h.index,rule:U})))}function p(h,U){h.repeat||h.key=="Enter"&&C(U)}function C(h){let U=t,A=U.slice(0,h.index);A=A.concat(h.rule.map(j=>j&&typeof j!="string"?{letter:j.letter,index:j.index+h.index}:j)),U=A.concat(U.slice(h.index+1).map(j=>j&&typeof j!="string"?{letter:j.letter,index:j.index+h.rule.length-1}:j)),ke(_e,t=U,t),ue.addRule(U),l(6,c=!1)}function T(h){o&&o.contains(h)||l(6,c=!1)}function _(h){let U=ne.toJSON(),A=new Blob([JSON.stringify(U)],{type:"application/json"}),j=URL.createObjectURL(A),fe=document.createElement("a");fe.href=j,fe.download=`${h}.json`,fe.click(),URL.revokeObjectURL(j)}function y(){let h=document.createElement("input");h.type="file",h.accept="application/json",h.onchange=U=>{var fe;let A=(fe=U.target.files)==null?void 0:fe[0];if(!A)return;let j=new FileReader;j.onload=ze=>{var ye;let We=JSON.parse((ye=ze.target)==null?void 0:ye.result);try{ne.fromJSON(We)}catch(qe){l(3,i=qe.message),s.open()}},j.readAsText(A)},h.click()}function N(h){if(h.key=="z"&&h.ctrlKey)return ue.removeRule(),h.stopPropagation(),h.preventDefault(),!1;if(h.key=="s"&&h.ctrlKey)return u.open(),h.stopPropagation(),h.preventDefault(),!1;if(h.key=="l"&&h.ctrlKey)return y(),h.stopPropagation(),h.preventDefault(),!1}const m=h=>C(h),E=(h,U)=>p(U,h),M=h=>T(h.detail);function O(h){o=h,l(2,o)}const B=h=>d(h.detail),z=()=>f(),ae=()=>u.open(),W=()=>y();function Q(h){X[h?"unshift":"push"](()=>{s=h,l(4,s)})}const ve=()=>l(3,i="");function be(h){X[h?"unshift":"push"](()=>{u=h,l(5,u)})}const P=h=>_(h.detail);return r.$$.update=()=>{r.$$.dirty[0]&1&&(n.start===""?ke(_e,t=[],t):f())},[n,a,o,i,s,u,c,t,f,d,p,C,T,_,y,N,m,E,M,O,B,z,ae,W,Q,ve,be,P]}class Wt extends ee{constructor(e){super(),te(this,e,zt,Jt,x,{},null,[-1,-1])}}function qt(r){let e,l,t,n;return e=new mt({}),t=new Wt({}),{c(){q(e.$$.fragment),l=S(),q(t.$$.fragment)},l(a){G(e.$$.fragment,a),l=L(a),G(t.$$.fragment,a)},m(a,o){K(e,a,o),I(a,l,o),K(t,a,o),n=!0},p:H,i(a){n||(R(e.$$.fragment,a),R(t.$$.fragment,a),n=!0)},o(a){$(e.$$.fragment,a),$(t.$$.fragment,a),n=!1},d(a){a&&g(l),F(e,a),F(t,a)}}}class Yt extends ee{constructor(e){super(),te(this,e,null,qt,x,{})}}export{Yt as component,Qt as universal};
