import{s as Y,f as C,l as te,a as S,g as T,h as P,m as ne,d as b,c as M,u as z,j as v,B as _e,i as L,y as g,C as ue,D as j,n as re,z as J,E as oe,F as ae,p as X,G as je,H as de,b as Ae,I as He,A as me,J as Pe,e as he,K as Je,r as ze,v as Ge,w as Fe,x as qe}from"../chunks/scheduler.b56bf6ad.js";import{S as x,i as ee,b as F,d as q,m as K,a as R,g as ce,c as fe,t as U,e as Z,f as Se}from"../chunks/index.2d2ddacd.js";import{w as Me}from"../chunks/index.64e3b39a.js";function Q(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}const Ke=!0,Ze=!1,Dt=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ke,ssr:Ze},Symbol.toStringTag,{value:"Module"}));function Qe(s){let e,n,l,t,i,o,u,r,a,f="Invalid input",c,_,h,O,y,d="Ok",E,w,p="Cancel",k,D;return{c(){e=C("dialog"),n=C("div"),l=C("h1"),t=te(s[0]),i=S(),o=C("p"),u=te(s[1]),r=S(),a=C("p"),a.textContent=f,c=S(),_=C("form"),h=C("input"),O=S(),y=C("button"),y.textContent=d,E=S(),w=C("button"),w.textContent=p,this.h()},l(I){e=T(I,"DIALOG",{class:!0});var B=P(e);n=T(B,"DIV",{class:!0});var A=P(n);l=T(A,"H1",{class:!0});var H=P(l);t=ne(H,s[0]),H.forEach(b),i=M(A),o=T(A,"P",{class:!0});var le=P(o);u=ne(le,s[1]),le.forEach(b),r=M(A),a=T(A,"P",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-1fg550y"&&(a.textContent=f),c=M(A),_=T(A,"FORM",{method:!0,class:!0});var G=P(_);h=T(G,"INPUT",{class:!0,type:!0}),O=M(G),y=T(G,"BUTTON",{class:!0,"data-svelte-h":!0}),z(y)!=="svelte-ehnyly"&&(y.textContent=d),E=M(G),w=T(G,"BUTTON",{class:!0,"data-svelte-h":!0}),z(w)!=="svelte-1nfr5kn"&&(w.textContent=p),G.forEach(b),A.forEach(b),B.forEach(b),this.h()},h(){v(l,"class","svelte-n1w0m1"),v(o,"class","svelte-n1w0m1"),v(a,"class","errorMessage svelte-n1w0m1"),_e(a,"show",s[4]),v(h,"class","input svelte-n1w0m1"),v(h,"type","text"),_e(h,"errored",s[4]),v(y,"class","ok svelte-n1w0m1"),y.value="default",v(w,"class","cancel svelte-n1w0m1"),w.value="cancel",v(_,"method","dialog"),v(_,"class","svelte-n1w0m1"),v(n,"class","dialog svelte-n1w0m1"),v(e,"class","svelte-n1w0m1")},m(I,B){L(I,e,B),g(e,n),g(n,l),g(l,t),g(n,i),g(n,o),g(o,u),g(n,r),g(n,a),g(n,c),g(n,_),g(_,h),ue(h,s[3]),g(_,O),g(_,y),g(_,E),g(_,w),s[9](e),k||(D=[j(h,"input",s[8]),j(e,"close",s[5])],k=!0)},p(I,[B]){B&1&&re(t,I[0]),B&2&&re(u,I[1]),B&16&&_e(a,"show",I[4]),B&8&&h.value!==I[3]&&ue(h,I[3]),B&16&&_e(h,"errored",I[4])},i:J,o:J,d(I){I&&b(e),s[9](null),k=!1,oe(D)}}}function We(s,e,n){let{title:l}=e,{message:t}=e,{match:i=null}=e;const o=ae();let u,r,a=!1;function f(){n(3,r=""),n(4,a=!1),u.showModal()}function c(){if(u.returnValue==="default"){if(r===void 0||r===""){o("cancel");return}if(i!==null&&!i.test(r)){n(4,a=!0),u.showModal();return}o("ok",r)}else o("cancel")}function _(){r=this.value,n(3,r)}function h(O){X[O?"unshift":"push"](()=>{u=O,n(2,u)})}return s.$$set=O=>{"title"in O&&n(0,l=O.title),"message"in O&&n(1,t=O.message),"match"in O&&n(6,i=O.match)},[l,t,u,r,a,c,i,f,_,h]}class De extends x{constructor(e){super(),ee(this,e,We,Qe,Y,{title:0,message:1,match:6,open:7})}get open(){return this.$$.ctx[7]}}const Xe=""+new URL("../assets/add.377faa19.svg",import.meta.url).href,Ye=""+new URL("../assets/del.16504b92.svg",import.meta.url).href;function ve(s,e,n){const l=s.slice();return l[13]=e[n],l[14]=e,l[15]=n,l}function be(s){let e,n,l,t,i=`<img src="${Ye}" alt="delete" class="svelte-5u0uf6"/>`,o,u;function r(){s[8].call(n,s[15])}function a(...c){return s[9](s[15],...c)}function f(){return s[10](s[15])}return{c(){e=C("li"),n=C("input"),l=S(),t=C("button"),t.innerHTML=i,this.h()},l(c){e=T(c,"LI",{class:!0});var _=P(e);n=T(_,"INPUT",{type:!0,class:!0}),l=M(_),t=T(_,"BUTTON",{class:!0,"data-svelte-h":!0}),z(t)!=="svelte-leavts"&&(t.innerHTML=i),_.forEach(b),this.h()},h(){v(n,"type","text"),v(n,"class","svelte-5u0uf6"),v(t,"class","prule__applications__removebutton svelte-5u0uf6"),v(e,"class","prule__applications__application svelte-5u0uf6")},m(c,_){L(c,e,_),g(e,n),ue(n,s[0][s[15]]),g(e,l),g(e,t),o||(u=[j(n,"input",r),j(n,"input",a),j(t,"click",f)],o=!0)},p(c,_){s=c,_&1&&n.value!==s[0][s[15]]&&ue(n,s[0][s[15]])},d(c){c&&b(e),o=!1,oe(u)}}}function xe(s){let e,n,l=!1,t,i,o,u,r,a,f,c=`<img src="${Xe}" alt="add" class="svelte-5u0uf6"/>`,_,h,O,y=Q(s[0]),d=[];for(let E=0;E<y.length;E+=1)d[E]=be(ve(s,y,E));return _=je(s[7][0]),{c(){e=C("div"),n=C("input"),t=S(),i=C("h3"),o=te(s[2]),u=S(),r=C("ul");for(let E=0;E<d.length;E+=1)d[E].c();a=S(),f=C("button"),f.innerHTML=c,this.h()},l(E){e=T(E,"DIV",{class:!0});var w=P(e);n=T(w,"INPUT",{class:!0,type:!0,name:!0}),t=M(w),i=T(w,"H3",{class:!0});var p=P(i);o=ne(p,s[2]),p.forEach(b),u=M(w),r=T(w,"UL",{class:!0});var k=P(r);for(let D=0;D<d.length;D+=1)d[D].l(k);a=M(k),f=T(k,"BUTTON",{class:!0,"data-svelte-h":!0}),z(f)!=="svelte-2vjw9w"&&(f.innerHTML=c),k.forEach(b),w.forEach(b),this.h()},h(){v(n,"class","prule__start svelte-5u0uf6"),v(n,"type","radio"),v(n,"name","ruleStart"),n.__value=s[2],ue(n,n.__value),v(i,"class","prule__name svelte-5u0uf6"),v(f,"class","prule__applications__addbutton svelte-5u0uf6"),v(r,"class","prule__applications svelte-5u0uf6"),v(e,"class","prule svelte-5u0uf6"),_.p(n)},m(E,w){L(E,e,w),g(e,n),n.checked=n.__value===s[1],g(e,t),g(e,i),g(i,o),g(e,u),g(e,r);for(let p=0;p<d.length;p+=1)d[p]&&d[p].m(r,null);g(r,a),g(r,f),h||(O=[j(n,"change",s[6]),j(f,"click",s[4])],h=!0)},p(E,[w]){if(w&4&&(n.__value=E[2],ue(n,n.__value),l=!0),(l||w&2)&&(n.checked=n.__value===E[1]),w&4&&re(o,E[2]),w&41){y=Q(E[0]);let p;for(p=0;p<y.length;p+=1){const k=ve(E,y,p);d[p]?d[p].p(k,w):(d[p]=be(k),d[p].c(),d[p].m(r,a))}for(;p<d.length;p+=1)d[p].d(1);d.length=y.length}},i:J,o:J,d(E){E&&b(e),de(d,E),_.r(),h=!1,oe(O)}}}function et(s,e,n){let{name:l}=e,{rules:t=[""]}=e,{group:i=""}=e;t.length===0&&(t=[""]);const o={position:0,rule:null};Ae(()=>{o.rule!==null&&(o.rule.focus(),o.rule.setSelectionRange(o.position,o.position)),o.rule=null});const u=ae();function r(d,E){if(d==null)return;const w=d,p=w.selectionStart;n(0,t[E]=w.value.replace(/epsilon/g,"ε"),t),p!==null&&t[E]!==w.value&&(console.log("cursor pos",p),o.position=p-6,o.rule=w),u("input",t)}function a(){n(0,t=[...t,""]),u("input",t)}function f(d){t.length===1?n(0,t=[""]):n(0,t=t.filter((E,w)=>w!==d)),u("input",t)}const c=[[]];function _(){i=this.__value,n(1,i)}function h(d){t[d]=this.value,n(0,t)}const O=(d,E)=>r(E.target,d),y=d=>f(d);return s.$$set=d=>{"name"in d&&n(2,l=d.name),"rules"in d&&n(0,t=d.rules),"group"in d&&n(1,i=d.group)},[t,i,l,r,a,f,_,c,h,O,y]}class tt extends x{constructor(e){super(),ee(this,e,et,xe,Y,{name:2,rules:0,group:1})}}function nt(s,e){const n=[];return e.forEach(l=>{const t=[];l.split("").forEach((i,o)=>{s.productions.has(i)?t.push({letter:i,index:o}):i=="ε"?t.push(null):t.push(i)}),n.push(t)}),n}function lt(s,e){s.productions.forEach(n=>{n.forEach(l=>{l.forEach((t,i)=>{typeof t=="string"&&t==e&&(l[i]={letter:e,index:i})})})})}function st(){const{subscribe:s,set:e,update:n}=Me({productions:new Map,start:""});return{subscribe:s,set:e,update:n,reset:()=>e({productions:new Map,start:""}),addVariable:l=>n(t=>(t.productions.set(l,[]),t)),removeVariable:l=>n(t=>(t.productions.delete(l),t)),setProduction:(l,t)=>n(i=>(i.productions.set(l,nt(i,t)),lt(i,l),i)),setStart:l=>n(t=>(t.start=l,t)),toJSON:()=>{const l=He(W);return{productions:Object.fromEntries(l.productions),start:l.start}},fromJSON:l=>{const t=l;if(!t.productions||!t.start)throw new Error("Invalid grammar: missing fields");if(t.productions=new Map(Object.entries(t.productions)),t.productions.size==0||t.start=="")throw new Error("Invalid grammar: empty fields");if(!t.productions.has(t.start))throw new Error("Invalid grammar: no start symbol");for(const[i,o]of t.productions){if(i.length!=1)throw new Error("Invalid grammar: invalid variable");for(const u of o)for(const[r,a]of u.entries())if(a!==null){if(typeof a=="string"&&a.length!=1)throw new Error("Invalid grammar: invalid terminal");if(typeof a!="string"){if(!t.productions.has(a.letter))throw new Error("Invalid grammar: invalid variable");if(a.index!=r)throw new Error("Invalid grammar: invalid variable index")}}}e(t)}}}const W=st();function ke(s){return s.map(e=>e===null?"ε":typeof e=="string"?e:e.letter).join("")}function we(s,e,n){const l=s.slice();return l[7]=e[n][0],l[8]=e[n][1],l}function ye(s){var u;let e,n,l;function t(r){s[2](r)}function i(...r){return s[3](s[7],...r)}let o={name:s[7],rules:(u=s[1].productions.get(s[7]))==null?void 0:u.map(ke)};return s[1].start!==void 0&&(o.group=s[1].start),e=new tt({props:o}),X.push(()=>Se(e,"group",t)),e.$on("input",i),{c(){F(e.$$.fragment)},l(r){q(e.$$.fragment,r)},m(r,a){K(e,r,a),l=!0},p(r,a){var c;s=r;const f={};a&2&&(f.name=s[7]),a&2&&(f.rules=(c=s[1].productions.get(s[7]))==null?void 0:c.map(ke)),!n&&a&2&&(n=!0,f.group=s[1].start,Pe(()=>n=!1)),e.$set(f)},i(r){l||(R(e.$$.fragment,r),l=!0)},o(r){U(e.$$.fragment,r),l=!1},d(r){Z(e,r)}}}function rt(s){let e,n,l="<h2>Production rules</h2>",t,i,o,u,r,a="Add production rule",f,c,_,h,O,y=Q(s[1].productions),d=[];for(let p=0;p<y.length;p+=1)d[p]=ye(we(s,y,p));const E=p=>U(d[p],1,1,()=>{d[p]=null});let w={title:"Add production rule",message:"Enter the name of the new production rule",match:/^[a-zA-Z]$/};return c=new De({props:w}),s[5](c),c.$on("ok",s[6]),{c(){e=C("nav"),n=C("div"),n.innerHTML=l,t=S(),i=C("div");for(let p=0;p<d.length;p+=1)d[p].c();o=S(),u=C("div"),r=C("button"),r.textContent=a,f=S(),F(c.$$.fragment),this.h()},l(p){e=T(p,"NAV",{class:!0});var k=P(e);n=T(k,"DIV",{class:!0,"data-svelte-h":!0}),z(n)!=="svelte-irhesm"&&(n.innerHTML=l),t=M(k),i=T(k,"DIV",{class:!0});var D=P(i);for(let B=0;B<d.length;B+=1)d[B].l(D);D.forEach(b),o=M(k),u=T(k,"DIV",{class:!0});var I=P(u);r=T(I,"BUTTON",{class:!0,"data-svelte-h":!0}),z(r)!=="svelte-1knfucn"&&(r.textContent=a),I.forEach(b),f=M(k),q(c.$$.fragment,k),k.forEach(b),this.h()},h(){v(n,"class","productionRules__top svelte-15dbb21"),v(i,"class","productionRules__container svelte-15dbb21"),v(r,"class","productionRules__bottom__addButton svelte-15dbb21"),v(u,"class","productionRules__bottom svelte-15dbb21"),v(e,"class","productionRules svelte-15dbb21")},m(p,k){L(p,e,k),g(e,n),g(e,t),g(e,i);for(let D=0;D<d.length;D+=1)d[D]&&d[D].m(i,null);g(e,o),g(e,u),g(u,r),g(e,f),K(c,e,null),_=!0,h||(O=j(r,"click",s[4]),h=!0)},p(p,[k]){if(k&2){y=Q(p[1].productions);let I;for(I=0;I<y.length;I+=1){const B=we(p,y,I);d[I]?(d[I].p(B,k),R(d[I],1)):(d[I]=ye(B),d[I].c(),R(d[I],1),d[I].m(i,null))}for(ce(),I=y.length;I<d.length;I+=1)E(I);fe()}const D={};c.$set(D)},i(p){if(!_){for(let k=0;k<y.length;k+=1)R(d[k]);R(c.$$.fragment,p),_=!0}},o(p){d=d.filter(Boolean);for(let k=0;k<d.length;k+=1)U(d[k]);U(c.$$.fragment,p),_=!1},d(p){p&&b(e),de(d,p),s[5](null),Z(c),h=!1,O()}}}function ot(s,e,n){let l;me(s,W,f=>n(1,l=f));let t;function i(f){s.$$.not_equal(l.start,f)&&(l.start=f,W.set(l))}const o=(f,c)=>W.setProduction(f,c.detail),u=()=>t.open();function r(f){X[f?"unshift":"push"](()=>{t=f,n(0,t)})}return[t,l,i,o,u,r,f=>W.setProduction(f.detail,[""])]}class it extends x{constructor(e){super(),ee(this,e,ot,rt,Y,{})}}function ut(s){let e,n=s[0].letter+"",l,t,i;return{c(){e=C("span"),l=te(n),this.h()},l(o){e=T(o,"SPAN",{class:!0,tabindex:!0,role:!0});var u=P(e);l=ne(u,n),u.forEach(b),this.h()},h(){v(e,"class","nonterminal svelte-1gobc4g"),v(e,"tabindex","-1"),v(e,"role","button")},m(o,u){L(o,e,u),g(e,l),t||(i=[j(e,"keypress",s[3]),j(e,"click",function(){Je(s[1](s[0]))&&s[1](s[0]).apply(this,arguments)})],t=!0)},p(o,u){s=o,u&1&&n!==(n=s[0].letter+"")&&re(l,n)},d(o){o&&b(e),t=!1,oe(i)}}}function at(s){let e,n;return{c(){e=C("span"),n=te(s[0]),this.h()},l(l){e=T(l,"SPAN",{class:!0});var t=P(e);n=ne(t,s[0]),t.forEach(b),this.h()},h(){v(e,"class","terminal")},m(l,t){L(l,e,t),g(e,n)},p(l,t){t&1&&re(n,l[0])},d(l){l&&b(e)}}}function ct(s){let e,n="ε";return{c(){e=C("span"),e.textContent=n,this.h()},l(l){e=T(l,"SPAN",{class:!0,"data-svelte-h":!0}),z(e)!=="svelte-1rb8g4u"&&(e.textContent=n),this.h()},h(){v(e,"class","terminal")},m(l,t){L(l,e,t)},p:J,d(l){l&&b(e)}}}function ft(s){let e;function n(i,o){return i[0]===null?ct:typeof i[0]=="string"?at:ut}let l=n(s),t=l(s);return{c(){t.c(),e=he()},l(i){t.l(i),e=he()},m(i,o){t.m(i,o),L(i,e,o)},p(i,[o]){l===(l=n(i))&&t?t.p(i,o):(t.d(1),t=l(i),t&&(t.c(),t.m(e.parentNode,e)))},i:J,o:J,d(i){i&&b(e),t.d(i)}}}function dt(s,e,n){let{symbol:l=null}=e,t=ae();function i(r){t("nonterminal",r)}function o(r,a){r.key==="Enter"&&t("nonterminal",a)}const u=r=>o(r,l);return s.$$set=r=>{"symbol"in r&&n(0,l=r.symbol)},[l,i,o,u]}let Ue=class extends x{constructor(e){super(),ee(this,e,dt,ft,Y,{symbol:0})}};function Ee(s,e,n){const l=s.slice();return l[7]=e[n],l}function Ce(s){let e,n;return e=new Ue({props:{symbol:s[7]}}),e.$on("nonterminal",s[4]),{c(){F(e.$$.fragment)},l(l){q(e.$$.fragment,l)},m(l,t){K(e,l,t),n=!0},p(l,t){const i={};t&1&&(i.symbol=l[7]),e.$set(i)},i(l){n||(R(e.$$.fragment,l),n=!0)},o(l){U(e.$$.fragment,l),n=!1},d(l){Z(e,l)}}}function _t(s){let e,n,l=Q(s[0]),t=[];for(let o=0;o<l.length;o+=1)t[o]=Ce(Ee(s,l,o));const i=o=>U(t[o],1,1,()=>{t[o]=null});return{c(){e=C("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=T(o,"DIV",{class:!0});var u=P(e);for(let r=0;r<t.length;r+=1)t[r].l(u);u.forEach(b),this.h()},h(){v(e,"class","rule_display")},m(o,u){L(o,e,u);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null);s[5](e),n=!0},p(o,[u]){if(u&5){l=Q(o[0]);let r;for(r=0;r<l.length;r+=1){const a=Ee(o,l,r);t[r]?(t[r].p(a,u),R(t[r],1)):(t[r]=Ce(a),t[r].c(),R(t[r],1),t[r].m(e,null))}for(ce(),r=l.length;r<t.length;r+=1)i(r);fe()}},i(o){if(!n){for(let u=0;u<l.length;u+=1)R(t[u]);n=!0}},o(o){t=t.filter(Boolean);for(let u=0;u<t.length;u+=1)U(t[u]);n=!1},d(o){o&&b(e),de(t,o),s[5](null)}}}function ht(s,e,n){let l;me(s,W,f=>n(3,l=f));let{state:t=[]}=e,{node:i}=e,o=ae();function u(f){o("nonterminal",f)}const r=f=>u(f.detail);function a(f){X[f?"unshift":"push"](()=>{i=f,n(1,i)})}return s.$$set=f=>{"state"in f&&n(0,t=f.state),"node"in f&&n(1,i=f.node)},s.$$.update=()=>{s.$$.dirty&8&&(l.start===""?n(0,t=[]):n(0,t=[{letter:l.start,index:0}]))},[t,i,u,l,r,a]}class pt extends x{constructor(e){super(),ee(this,e,ht,_t,Y,{state:0,node:1})}}function mt(s){let e,n,l,t,i;const o=s[3].default,u=ze(o,s,s[2],null);return{c(){e=S(),n=C("div"),u&&u.c()},l(r){e=M(r),n=T(r,"DIV",{});var a=P(n);u&&u.l(a),a.forEach(b)},m(r,a){L(r,e,a),L(r,n,a),u&&u.m(n,null),s[4](n),l=!0,t||(i=j(document,"click",s[1]),t=!0)},p(r,[a]){u&&u.p&&(!l||a&4)&&Ge(u,o,r,r[2],l?qe(o,r[2],a,null):Fe(r[2]),null)},i(r){l||(R(u,r),l=!0)},o(r){U(u,r),l=!1},d(r){r&&(b(e),b(n)),u&&u.d(r),s[4](null),t=!1,i()}}}function gt(s,e,n){let{$$slots:l={},$$scope:t}=e,i=null,o=ae();function u(a){i&&!i.contains(a.target)&&o("clickOutside",a.target)}function r(a){X[a?"unshift":"push"](()=>{i=a,n(0,i)})}return s.$$set=a=>{"$$scope"in a&&n(2,t=a.$$scope)},[i,u,t,l,r]}class vt extends x{constructor(e){super(),ee(this,e,gt,mt,Y,{})}}function bt(){const{subscribe:s,set:e,update:n}=Me([]);return{subscribe:s,set:e,update:n,reset:()=>e([]),restore:l=>n(t=>t.slice(0,l)),addRule:l=>n(t=>[...t,l]),removeRule:()=>n(l=>l.slice(0,-1))}}const Te=bt();function kt(s){let e,n,l,t,i,o,u,r,a,f="Ok",c,_;return{c(){e=C("dialog"),n=C("form"),l=C("h1"),t=te(s[0]),i=S(),o=C("p"),u=te(s[1]),r=S(),a=C("button"),a.textContent=f,this.h()},l(h){e=T(h,"DIALOG",{class:!0});var O=P(e);n=T(O,"FORM",{class:!0,method:!0});var y=P(n);l=T(y,"H1",{class:!0});var d=P(l);t=ne(d,s[0]),d.forEach(b),i=M(y),o=T(y,"P",{});var E=P(o);u=ne(E,s[1]),E.forEach(b),r=M(y),a=T(y,"BUTTON",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-ehnyly"&&(a.textContent=f),y.forEach(b),O.forEach(b),this.h()},h(){v(l,"class","svelte-1v8wgvi"),v(a,"class","ok svelte-1v8wgvi"),a.value="default",v(n,"class","dialog svelte-1v8wgvi"),v(n,"method","dialog"),v(e,"class","svelte-1v8wgvi")},m(h,O){L(h,e,O),g(e,n),g(n,l),g(l,t),g(n,i),g(n,o),g(o,u),g(n,r),g(n,a),s[5](e),c||(_=[j(n,"submit",s[3]),j(e,"close",s[3])],c=!0)},p(h,[O]){O&1&&re(t,h[0]),O&2&&re(u,h[1])},i:J,o:J,d(h){h&&b(e),s[5](null),c=!1,oe(_)}}}function wt(s,e,n){let{title:l}=e,{message:t}=e;const i=ae();let o;function u(){o.showModal()}function r(){i("ok")}function a(f){X[f?"unshift":"push"](()=>{o=f,n(2,o)})}return s.$$set=f=>{"title"in f&&n(0,l=f.title),"message"in f&&n(1,t=f.message)},[l,t,o,r,u,a]}class yt extends x{constructor(e){super(),ee(this,e,wt,kt,Y,{title:0,message:1,open:4})}get open(){return this.$$.ctx[4]}}function Oe(s,e,n){const l=s.slice();return l[27]=e[n],l}function Ie(s,e,n){const l=s.slice();return l[30]=e[n],l}function Et(s){let e,n,l,t,i;e=new vt({props:{$$slots:{default:[Tt]},$$scope:{ctx:s}}}),e.$on("clickOutside",s[17]);function o(r){s[18](r)}let u={state:s[1]};return s[3]!==void 0&&(u.node=s[3]),l=new pt({props:u}),X.push(()=>Se(l,"node",o)),l.$on("nonterminal",s[19]),{c(){F(e.$$.fragment),n=S(),F(l.$$.fragment)},l(r){q(e.$$.fragment,r),n=M(r),q(l.$$.fragment,r)},m(r,a){K(e,r,a),L(r,n,a),K(l,r,a),i=!0},p(r,a){const f={};a[0]&132|a[1]&4&&(f.$$scope={dirty:a,ctx:r}),e.$set(f);const c={};a[0]&2&&(c.state=r[1]),!t&&a[0]&8&&(t=!0,c.node=r[3],Pe(()=>t=!1)),l.$set(c)},i(r){i||(R(e.$$.fragment,r),R(l.$$.fragment,r),i=!0)},o(r){U(e.$$.fragment,r),U(l.$$.fragment,r),i=!1},d(r){r&&b(n),Z(e,r),Z(l,r)}}}function Ct(s){let e;return{c(){e=te("No start symbol")},l(n){e=ne(n,"No start symbol")},m(n,l){L(n,e,l)},p:J,i:J,o:J,d(n){n&&b(e)}}}function Ne(s){let e,n,l=Q(s[2]),t=[];for(let o=0;o<l.length;o+=1)t[o]=$e(Oe(s,l,o));const i=o=>U(t[o],1,1,()=>{t[o]=null});return{c(){e=C("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=T(o,"DIV",{class:!0});var u=P(e);for(let r=0;r<t.length;r+=1)t[r].l(u);u.forEach(b),this.h()},h(){v(e,"class","possibilities svelte-1lvc58u")},m(o,u){L(o,e,u);for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(e,null);n=!0},p(o,u){if(u[0]&3076){l=Q(o[2]);let r;for(r=0;r<l.length;r+=1){const a=Oe(o,l,r);t[r]?(t[r].p(a,u),R(t[r],1)):(t[r]=$e(a),t[r].c(),R(t[r],1),t[r].m(e,null))}for(ce(),r=l.length;r<t.length;r+=1)i(r);fe()}},i(o){if(!n){for(let u=0;u<l.length;u+=1)R(t[u]);n=!0}},o(o){t=t.filter(Boolean);for(let u=0;u<t.length;u+=1)U(t[u]);n=!1},d(o){o&&b(e),de(t,o)}}}function Re(s){let e,n;return e=new Ue({props:{symbol:s[30]}}),{c(){F(e.$$.fragment)},l(l){q(e.$$.fragment,l)},m(l,t){K(e,l,t),n=!0},p(l,t){const i={};t[0]&4&&(i.symbol=l[30]),e.$set(i)},i(l){n||(R(e.$$.fragment,l),n=!0)},o(l){U(e.$$.fragment,l),n=!1},d(l){Z(e,l)}}}function $e(s){let e,n,l,t,i,o=Q(s[27].rule),u=[];for(let c=0;c<o.length;c+=1)u[c]=Re(Ie(s,o,c));const r=c=>U(u[c],1,1,()=>{u[c]=null});function a(){return s[15](s[27])}function f(...c){return s[16](s[27],...c)}return{c(){e=C("div");for(let c=0;c<u.length;c+=1)u[c].c();n=S(),this.h()},l(c){e=T(c,"DIV",{class:!0,tabindex:!0,role:!0});var _=P(e);for(let h=0;h<u.length;h+=1)u[h].l(_);n=M(_),_.forEach(b),this.h()},h(){v(e,"class","possibility svelte-1lvc58u"),v(e,"tabindex","-1"),v(e,"role","button")},m(c,_){L(c,e,_);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(e,null);g(e,n),l=!0,t||(i=[j(e,"click",a),j(e,"keypress",f)],t=!0)},p(c,_){if(s=c,_[0]&4){o=Q(s[27].rule);let h;for(h=0;h<o.length;h+=1){const O=Ie(s,o,h);u[h]?(u[h].p(O,_),R(u[h],1)):(u[h]=Re(O),u[h].c(),R(u[h],1),u[h].m(e,n))}for(ce(),h=o.length;h<u.length;h+=1)r(h);fe()}},i(c){if(!l){for(let _=0;_<o.length;_+=1)R(u[_]);l=!0}},o(c){u=u.filter(Boolean);for(let _=0;_<u.length;_+=1)U(u[_]);l=!1},d(c){c&&b(e),de(u,c),t=!1,oe(i)}}}function Tt(s){let e,n,l=s[7]&&Ne(s);return{c(){l&&l.c(),e=he()},l(t){l&&l.l(t),e=he()},m(t,i){l&&l.m(t,i),L(t,e,i),n=!0},p(t,i){t[7]?l?(l.p(t,i),i[0]&128&&R(l,1)):(l=Ne(t),l.c(),R(l,1),l.m(e.parentNode,e)):l&&(ce(),U(l,1,1,()=>{l=null}),fe())},i(t){n||(R(l),n=!0)},o(t){U(l),n=!1},d(t){t&&b(e),l&&l.d(t)}}}function Ot(s){let e,n,l,t,i,o,u,r,a,f="Reset",c,_,h="Save",O,y,d="Load",E,w,p,k,D,I,B;const A=[Ct,Et],H=[];function le(N,m){return N[0].start===""?0:1}i=le(s),o=H[i]=A[i](s);let G={title:"Import Error",message:s[4]};w=new yt({props:G}),s[23](w),w.$on("ok",s[24]);let pe={title:"Grammar Name",message:"Enter the name of the grammar"};return k=new De({props:pe}),s[25](k),k.$on("ok",s[26]),{c(){e=C("div"),n=C("div"),l=S(),t=C("div"),o.c(),u=S(),r=C("nav"),a=C("button"),a.textContent=f,c=S(),_=C("button"),_.textContent=h,O=S(),y=C("button"),y.textContent=d,E=S(),F(w.$$.fragment),p=S(),F(k.$$.fragment),this.h()},l(N){e=T(N,"DIV",{class:!0});var m=P(e);n=T(m,"DIV",{class:!0}),P(n).forEach(b),l=M(m),t=T(m,"DIV",{class:!0});var V=P(t);o.l(V),V.forEach(b),u=M(m),r=T(m,"NAV",{class:!0});var $=P(r);a=T($,"BUTTON",{class:!0,"data-svelte-h":!0}),z(a)!=="svelte-rhidub"&&(a.textContent=f),c=M($),_=T($,"BUTTON",{class:!0,"data-svelte-h":!0}),z(_)!=="svelte-1bjhmza"&&(_.textContent=h),O=M($),y=T($,"BUTTON",{class:!0,"data-svelte-h":!0}),z(y)!=="svelte-ca8w"&&(y.textContent=d),$.forEach(b),m.forEach(b),E=M(N),q(w.$$.fragment,N),p=M(N),q(k.$$.fragment,N),this.h()},h(){v(n,"class","derivationTree"),v(t,"class","manipulator svelte-1lvc58u"),v(a,"class","svelte-1lvc58u"),v(_,"class","svelte-1lvc58u"),v(y,"class","svelte-1lvc58u"),v(r,"class","floating_nav svelte-1lvc58u"),v(e,"class","manipulator_contener svelte-1lvc58u")},m(N,m){L(N,e,m),g(e,n),g(e,l),g(e,t),H[i].m(t,null),g(e,u),g(e,r),g(r,a),g(r,c),g(r,_),g(r,O),g(r,y),L(N,E,m),K(w,N,m),L(N,p,m),K(k,N,m),D=!0,I||(B=[j(a,"click",s[20]),j(_,"click",s[21]),j(y,"click",s[22])],I=!0)},p(N,m){let V=i;i=le(N),i===V?H[i].p(N,m):(ce(),U(H[V],1,1,()=>{H[V]=null}),fe(),o=H[i],o?o.p(N,m):(o=H[i]=A[i](N),o.c()),R(o,1),o.m(t,null));const $={};m[0]&16&&($.message=N[4]),w.$set($);const se={};k.$set(se)},i(N){D||(R(o),R(w.$$.fragment,N),R(k.$$.fragment,N),D=!0)},o(N){U(o),U(w.$$.fragment,N),U(k.$$.fragment,N),D=!1},d(N){N&&(b(e),b(E),b(p)),H[i].d(),s[23](null),Z(w,N),s[25](null),Z(k,N),I=!1,oe(B)}}}function It(s,e,n){let l;me(s,W,m=>n(0,l=m));let t=[],i=[],o,u="",r,a;function f(){n(1,t=[{letter:l.start,index:0}]),Te.reset()}let c=!1;function _(m){n(7,c=!0),n(2,i=l.productions.get(m.letter).map(V=>({index:m.index,rule:V})))}function h(m,V){m.repeat||m.key=="Enter"&&O(V)}function O(m){Te.addRule(t);let V=t.slice(0,m.index);V=V.concat(m.rule.map($=>$&&typeof $!="string"?{letter:$.letter,index:$.index+m.index}:$)),n(1,t=V.concat(t.slice(m.index+1).map($=>$&&typeof $!="string"?{letter:$.letter,index:$.index+m.rule.length-1}:$))),n(7,c=!1)}function y(m){o&&o.contains(m)||n(7,c=!1)}function d(m){let V=W.toJSON(),$=new Blob([JSON.stringify(V)],{type:"application/json"}),se=URL.createObjectURL($),ie=document.createElement("a");ie.href=se,ie.download=`${m}.json`,ie.click(),URL.revokeObjectURL(se)}function E(){let m=document.createElement("input");m.type="file",m.accept="application/json",m.onchange=V=>{var ie;let $=(ie=V.target.files)==null?void 0:ie[0];if(!$)return;let se=new FileReader;se.onload=Be=>{var ge;let Le=JSON.parse((ge=Be.target)==null?void 0:ge.result);try{W.fromJSON(Le)}catch(Ve){n(4,u=Ve.message),r.open()}},se.readAsText($)},m.click()}const w=m=>O(m),p=(m,V)=>h(V,m),k=m=>y(m.detail);function D(m){o=m,n(3,o)}const I=m=>_(m.detail),B=()=>f(),A=()=>a.open(),H=()=>E();function le(m){X[m?"unshift":"push"](()=>{r=m,n(5,r)})}const G=()=>n(4,u="");function pe(m){X[m?"unshift":"push"](()=>{a=m,n(6,a)})}const N=m=>d(m.detail);return s.$$.update=()=>{s.$$.dirty[0]&1&&(l.start===""?n(1,t=[]):f())},[l,t,i,o,u,r,a,c,f,_,h,O,y,d,E,w,p,k,D,I,B,A,H,le,G,pe,N]}class Nt extends x{constructor(e){super(),ee(this,e,It,Ot,Y,{},null,[-1,-1])}}function Rt(s){let e,n,l,t;return e=new it({}),l=new Nt({}),{c(){F(e.$$.fragment),n=S(),F(l.$$.fragment)},l(i){q(e.$$.fragment,i),n=M(i),q(l.$$.fragment,i)},m(i,o){K(e,i,o),L(i,n,o),K(l,i,o),t=!0},p:J,i(i){t||(R(e.$$.fragment,i),R(l.$$.fragment,i),t=!0)},o(i){U(e.$$.fragment,i),U(l.$$.fragment,i),t=!1},d(i){i&&b(n),Z(e,i),Z(l,i)}}}class Bt extends x{constructor(e){super(),ee(this,e,null,Rt,Y,{})}}export{Bt as component,Dt as universal};
